/*! For license information please see tracker.js.LICENSE.txt */
(()=>{var t={765:function(t,e,n){t=n.nmd(t),function(t,e,r){"use strict";var i=function(t,e,n){n=o.extend({},o.options,n);var r=o.runValidations(t,e,n);if(r.some((function(t){return o.isPromise(t.error)})))throw new Error("Use validate.async if you want support for promises");return i.processValidationResults(r,n)},o=i;o.extend=function(t){return[].slice.call(arguments,1).forEach((function(e){for(var n in e)t[n]=e[n]})),t},o.extend(i,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(t+="+"+o.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var r,i,s,a,u,f,c,l=[];for(r in(o.isDomElement(t)||o.isJqueryElement(t))&&(t=o.collectFormValues(t)),e)for(i in s=o.getDeepObjectValue(t,r),a=o.result(e[r],s,t,r,n,e)){if(!(u=o.validators[i]))throw c=o.format("Unknown validator %{name}",{name:i}),new Error(c);f=a[i],(f=o.result(f,s,t,r,n,e))&&l.push({attribute:r,value:s,validator:i,globalOptions:n,attributes:t,options:f,error:u.call(u,s,f,r,t,n)})}return l},processValidationResults:function(t,e){t=o.pruneEmptyErrors(t,e),t=o.expandMultipleErrors(t,e),t=o.convertErrorMessages(t,e);var n=e.format||"grouped";if("function"!=typeof o.formatters[n])throw new Error(o.format("Unknown format %{format}",e));return t=o.formatters[n](t),o.isEmpty(t)?void 0:t},async:function(t,e,n){var r=(n=o.extend({},o.async.options,n)).wrapErrors||function(t){return t};!1!==n.cleanAttributes&&(t=o.cleanAttributes(t,e));var i=o.runValidations(t,e,n);return new o.Promise((function(s,a){o.waitForResults(i).then((function(){var u=o.processValidationResults(i,n);u?a(new r(u,n,t,e)):s(t)}),(function(t){a(t)}))}))},single:function(t,e,n){return n=o.extend({},o.single.options,n,{format:"flat",fullMessages:!1}),o({single:t},{single:e},n)},waitForResults:function(t){return t.reduce((function(t,e){return o.isPromise(e.error)?t.then((function(){return e.error.then((function(t){e.error=t||null}))})):t}),new o.Promise((function(t){t()})))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return o.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!=t},isPromise:function(t){return!!t&&o.isFunction(t.then)},isJqueryElement:function(t){return t&&o.isString(t.jquery)},isDomElement:function(t){return!!t&&!(!t.querySelectorAll||!t.querySelector)&&(!(!o.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName))},isEmpty:function(t){var e;if(!o.isDefined(t))return!0;if(o.isFunction(t))return!1;if(o.isString(t))return o.EMPTY_STRING_REGEXP.test(t);if(o.isArray(t))return 0===t.length;if(o.isDate(t))return!1;if(o.isObject(t)){for(e in t)return!1;return!0}return!1},format:o.extend((function(t,e){return o.isString(t)?t.replace(o.format.FORMAT_REGEXP,(function(t,n,r){return"%"===n?"%{"+r+"}":String(e[r])})):t}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return o.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):o.isArray(t)?t.map((function(t){return o.prettify(t)})).join(", "):o.isObject(t)?o.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(t,e,n){return e+" "+n.toLowerCase()})).toLowerCase()},stringifyValue:function(t,e){return(e&&e.prettify||o.prettify)(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return o.isObject(t)&&!o.isArray(t)&&!o.isFunction(t)},contains:function(t,e){return!!o.isDefined(t)&&(o.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return o.isArray(t)?t.filter((function(t,e,n){return n.indexOf(t)==e})):t},forEachKeyInKeypath:function(t,e,n){if(o.isString(e)){var r,i="",s=!1;for(r=0;r<e.length;++r)switch(e[r]){case".":s?(s=!1,i+="."):(t=n(t,i,!1),i="");break;case"\\":s?(s=!1,i+="\\"):s=!0;break;default:s=!1,i+=e[r]}return n(t,i,!0)}},getDeepObjectValue:function(t,e){if(o.isObject(t))return o.forEachKeyInKeypath(t,e,(function(t,e){if(o.isObject(t))return t[e]}))},collectFormValues:function(t,e){var n,r,i,s,a,u,f={};if(o.isJqueryElement(t)&&(t=t[0]),!t)return f;for(e=e||{},s=t.querySelectorAll("input[name], textarea[name]"),n=0;n<s.length;++n)if(i=s.item(n),!o.isDefined(i.getAttribute("data-ignored"))){var c=i.name.replace(/\./g,"\\\\.");u=o.sanitizeFormValue(i.value,e),"number"===i.type?u=u?+u:null:"checkbox"===i.type?i.attributes.value?i.checked||(u=f[c]||null):u=i.checked:"radio"===i.type&&(i.checked||(u=f[c]||null)),f[c]=u}for(s=t.querySelectorAll("select[name]"),n=0;n<s.length;++n)if(i=s.item(n),!o.isDefined(i.getAttribute("data-ignored"))){if(i.multiple)for(r in u=[],i.options)(a=i.options[r])&&a.selected&&u.push(o.sanitizeFormValue(a.value,e));else{var l=void 0!==i.options[i.selectedIndex]?i.options[i.selectedIndex].value:"";u=o.sanitizeFormValue(l,e)}f[i.name]=u}return f},sanitizeFormValue:function(t,e){return e.trim&&o.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return o.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter((function(t){return!o.isEmpty(t.error)}))},expandMultipleErrors:function(t){var e=[];return t.forEach((function(t){o.isArray(t.error)?t.error.forEach((function(n){e.push(o.extend({},t,{error:n}))})):e.push(t)})),e},convertErrorMessages:function(t,e){var n=[],r=(e=e||{}).prettify||o.prettify;return t.forEach((function(t){var i=o.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);o.isString(i)?("^"===i[0]?i=i.slice(1):!1!==e.fullMessages&&(i=o.capitalize(r(t.attribute))+" "+i),i=i.replace(/\\\^/g,"^"),i=o.format(i,{value:o.stringifyValue(t.value,e)}),n.push(o.extend({},t,{error:i}))):n.push(t)})),n},groupErrorsByAttribute:function(t){var e={};return t.forEach((function(t){var n=e[t.attribute];n?n.push(t):e[t.attribute]=[t]})),e},flattenErrorsToArray:function(t){return t.map((function(t){return t.error})).filter((function(t,e,n){return n.indexOf(t)===e}))},cleanAttributes:function(t,e){function n(t,e,n){return o.isObject(t[e])?t[e]:t[e]=!!n||{}}return o.isObject(e)&&o.isObject(t)?function t(e,n){if(!o.isObject(e))return e;var r,i,s=o.extend({},e);for(i in e)r=n[i],o.isObject(r)?s[i]=t(s[i],r):r||delete s[i];return s}(t,e=function(t){var e,r={};for(e in t)t[e]&&o.forEachKeyInKeypath(r,e,n);return r}(e)):{}},exposeModule:function(t,e,n,r,i){n?(r&&r.exports&&(n=r.exports=t),n.validate=t):(e.validate=t,t.isFunction(i)&&i.amd&&i([],(function(){return t})))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),i.validators={presence:function(t,e){if(!1!==(e=o.extend({},this.options,e)).allowEmpty?!o.isDefined(t):o.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,n){if(o.isDefined(t)){var r,i=(e=o.extend({},this.options,e)).is,s=e.maximum,a=e.minimum,u=[],f=(t=(e.tokenizer||function(t){return t})(t)).length;return o.isNumber(f)?(o.isNumber(i)&&f!==i&&(r=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",u.push(o.format(r,{count:i}))),o.isNumber(a)&&f<a&&(r=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",u.push(o.format(r,{count:a}))),o.isNumber(s)&&f>s&&(r=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",u.push(o.format(r,{count:s}))),u.length>0?e.message||u:void 0):e.message||this.notValid||"has an incorrect length"}},numericality:function(t,e,n,r,i){if(o.isDefined(t)){var s,a,u=[],f={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}},c=(e=o.extend({},this.options,e)).prettify||i&&i.prettify||o.prettify;if(o.isString(t)&&e.strict){var l="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(l+="(\\.\\d+)?"),l+="$",!new RegExp(l).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&o.isString(t)&&!o.isEmpty(t)&&(t=+t),!o.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!o.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(s in f)if(a=e[s],o.isNumber(a)&&!f[s](t,a)){var d="not"+o.capitalize(s),h=e[d]||this[d]||this.message||"must be %{type} %{count}";u.push(o.format(h,{count:a,type:c(s)}))}return e.odd&&t%2!=1&&u.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&u.push(e.notEven||this.notEven||this.message||"must be even"),u.length?e.message||u:void 0}},datetime:o.extend((function(t,e){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(t)){var n,r=[],i=(e=o.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,s=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(n=e.notValid||e.message||this.notValid||"must be a valid date",o.format(n,{value:arguments[0]})):(!isNaN(i)&&t<i&&(n=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",n=o.format(n,{value:this.format(t,e),date:this.format(i,e)}),r.push(n)),!isNaN(s)&&t>s&&(n=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",n=o.format(n,{date:this.format(s,e),value:this.format(t,e)}),r.push(n)),r.length?o.unique(r):void 0)}}),{parse:null,format:null}),date:function(t,e){return e=o.extend({},e,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,t,e)},format:function(t,e){(o.isString(e)||e instanceof RegExp)&&(e={pattern:e});var n,r=(e=o.extend({},this.options,e)).message||this.message||"is invalid",i=e.pattern;if(o.isDefined(t))return o.isString(t)?(o.isString(i)&&(i=new RegExp(e.pattern,e.flags)),(n=i.exec(t))&&n[0].length==t.length?void 0:r):r},inclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),!o.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return o.format(n,{value:t})}},exclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),o.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return o.isString(e.within[t])&&(t=e.within[t]),o.format(n,{value:t})}},email:o.extend((function(t,e){var n=(e=o.extend({},this.options,e)).message||this.message||"is not a valid email";if(o.isDefined(t))return o.isString(t)&&this.PATTERN.exec(t)?void 0:n}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,e,n,r,i){if(o.isDefined(t)){o.isString(e)&&(e={attribute:e});var s=(e=o.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(o.isEmpty(e.attribute)||!o.isString(e.attribute))throw new Error("The attribute must be a non empty string");var a=o.getDeepObjectValue(r,e.attribute),u=e.comparator||function(t,e){return t===e},f=e.prettify||i&&i.prettify||o.prettify;return u(t,a,e,n,r)?void 0:o.format(s,{attribute:f(e.attribute)})}},url:function(t,e){if(o.isDefined(t)){var n=(e=o.extend({},this.options,e)).message||this.message||"is not a valid url",r=e.schemes||this.schemes||["http","https"],i=e.allowLocal||this.allowLocal||!1,s=e.allowDataUrl||this.allowDataUrl||!1;if(!o.isString(t))return n;var a="^(?:(?:"+r.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";return i?u+="?":a+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+u+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",s&&(a="(?:"+a+")|(?:^data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*$)"),new RegExp(a,"i").exec(t)?void 0:n}},type:o.extend((function(t,e,n,r,i){if(o.isString(e)&&(e={type:e}),o.isDefined(t)){var s,a=o.extend({},this.options,e),u=a.type;if(!o.isDefined(u))throw new Error("No type was specified");if(s=o.isFunction(u)?u:this.types[u],!o.isFunction(s))throw new Error("validate.validators.type.types."+u+" must be a function.");if(!s(t,a,n,r,i)){var f=e.message||this.messages[u]||this.message||a.message||(o.isFunction(u)?"must be of the correct type":"must be of type %{type}");return o.isFunction(f)&&(f=f(t,e,n,r,i)),o.format(f,{attribute:o.prettify(n),type:u})}}}),{types:{object:function(t){return o.isObject(t)&&!o.isArray(t)},array:o.isArray,integer:o.isInteger,number:o.isNumber,string:o.isString,date:o.isDate,boolean:o.isBoolean},messages:{}})},i.formatters={detailed:function(t){return t},flat:o.flattenErrorsToArray,grouped:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=o.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=t[e].map((function(t){return t.validator})).sort();return t}},i.exposeModule(i,this,t,e,n.amdD)}.call(this,e,t,n.amdD)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=n(765);class e{constructor(t){this.event=t.event,this.tags=t.tags||[],this.url=t.url,this.title=t.title,"string"==typeof t.ts?this.ts=new Date(t.ts):t.ts||(this.ts=new Date);try{this.validate()}catch(t){throw t instanceof Error&&console.error(t.message),new Error("Can`t create event.")}}static createInstance(t){return new e(t)}validate(){let e={event:{presence:!0,type:"string"},url:{url:{allowLocal:!0}},title:{presence:!0,type:"string"},tags:t=>{try{t.every((t=>{if("string"!=typeof t)throw new Error("Tag must be a string")}))}catch(t){return{tags:{message:t instanceof Error?t.message:"Tags not valid."}}}return null},ts:t=>t instanceof Date&&"Invalid Date"!==t.toDateString()?null:{ts:{message:"Date not valid"}}};(0,t.validate)({event:this.event,url:this.url,title:this.title,tags:this.tags,ts:this.ts},e)}}const r=new class{constructor(t){this.newEvent=(t,...n)=>{const r=new e({event:t,tags:[...n],url:"test",title:"title"});this.buffer.push(r),this.checkSend()},this.sendBufferThrottle=function(t,e,n){var r,i=n||{},o=i.noTrailing,s=void 0!==o&&o,a=i.noLeading,u=void 0!==a&&a,f=i.debounceMode,c=void 0===f?void 0:f,l=!1,d=0;function h(){r&&clearTimeout(r)}function m(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=this,f=Date.now()-d;function m(){d=Date.now(),e.apply(a,i)}function p(){r=void 0}l||(u||!c||r||m(),h(),void 0===c&&f>t?u?(d=Date.now(),s||(r=setTimeout(c?p:m,t))):m():!0!==s&&(r=setTimeout(c?p:m,void 0===c?t-f:t)))}return m.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;h(),l=!n},m}(1e3,this.sendBuffer),this.sender=new t,this.buffer=[],this.eventToSend=[]}checkSend(){this.buffer.length>=3?this.forceSendBuffer():this.sendBufferThrottle()}forceSendBuffer(){this.sendBufferThrottle.cancel({upcomingOnly:!0}),this.sendBuffer()}sendBuffer(){return t=this,e=void 0,r=function*(){if(this.buffer.length){this.eventToSend=[...this.buffer],this.buffer=[];try{yield this.sender.send(this.eventToSend),this.eventToSend=[]}catch(t){this.returnToBooferEventToSend(),this.checkSend()}}},new((n=void 0)||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r}returnToBooferEventToSend(){this.buffer.unshift(...this.eventToSend),this.eventToSend=[]}}(class{constructor(){this.send=t=>{return e=this,n=void 0,i=function*(){const e=yield window.fetch("http://localhost:8001/track",{method:"POST",headers:{"content-type":"text/plain;charset=UTF-8"},body:JSON.stringify(t)}),n=yield e.text();if("success"===n)return n;throw new Error(n)},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((i=i.apply(e,n||[])).next())}));var e,n,r,i}}});window.tracker={track(...t){r.newEvent(...t)}},window.addEventListener("beforeunload",(t=>{r.forceSendBuffer(),t.preventDefault()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVdHLEVBQVcsQ0FDN0dGLEdBQU1MLEVBQVlBLEVBQVV4TyxNQUFNc08sRUFBU0MsR0FBYyxLQUFLTyxPQUNsRSxJQVB3QyxJQUFVUixFQUFTQyxFQUFZSSxFQUFHSCxDQTBCcEUsQ0FDTixJSGpCSmEsT0FBT00sUUFOSSxDQUNIQyxTQUFTbEUsR0FDTFEsRUFBYUUsWUFBWVYsRUFDN0IsR0FJUjJELE9BQU9RLGlCQUFpQixnQkFBaUJwRSxJQUNyQ1MsRUFBYW1DLGtCQUNiNUMsRUFBTXFFLGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Z1bmRyYWlzZXVwLy4vbm9kZV9tb2R1bGVzL3ZhbGlkYXRlLmpzL3ZhbGlkYXRlLmpzIiwid2VicGFjazovL2Z1bmRyYWlzZXVwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Z1bmRyYWlzZXVwL3dlYnBhY2svcnVudGltZS9hbWQgZGVmaW5lIiwid2VicGFjazovL2Z1bmRyYWlzZXVwL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vZnVuZHJhaXNldXAvLi9zcmMvbW9kZWxzL0V2ZW50LnRzIiwid2VicGFjazovL2Z1bmRyYWlzZXVwLy4vc3JjL3NjcmlwdHMvdHJhY2tlci50cyIsIndlYnBhY2s6Ly9mdW5kcmFpc2V1cC8uL3NyYy9zY3JpcHRzL0V2ZW50c1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vZnVuZHJhaXNldXAvLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvZXNtL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmRyYWlzZXVwLy4vc3JjL3NjcmlwdHMvQXBpU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIHZhbGlkYXRlLmpzIDAuMTMuMVxuICpcbiAqIChjKSAyMDEzLTIwMTkgTmlja2xhcyBBbnNtYW4sIDIwMTMgV3JhcHBcbiAqIFZhbGlkYXRlLmpzIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxuICogaHR0cDovL3ZhbGlkYXRlanMub3JnL1xuICovXG5cbihmdW5jdGlvbihleHBvcnRzLCBtb2R1bGUsIGRlZmluZSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBUaGUgbWFpbiBmdW5jdGlvbiB0aGF0IGNhbGxzIHRoZSB2YWxpZGF0b3JzIHNwZWNpZmllZCBieSB0aGUgY29uc3RyYWludHMuXG4gIC8vIFRoZSBvcHRpb25zIGFyZSB0aGUgZm9sbG93aW5nOlxuICAvLyAgIC0gZm9ybWF0IChzdHJpbmcpIC0gQW4gb3B0aW9uIHRoYXQgY29udHJvbHMgaG93IHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBmb3JtYXR0ZWRcbiAgLy8gICAgICogZmxhdCAtIFJldHVybnMgYSBmbGF0IGFycmF5IG9mIGp1c3QgdGhlIGVycm9yIG1lc3NhZ2VzXG4gIC8vICAgICAqIGdyb3VwZWQgLSBSZXR1cm5zIHRoZSBtZXNzYWdlcyBncm91cGVkIGJ5IGF0dHJpYnV0ZSAoZGVmYXVsdClcbiAgLy8gICAgICogZGV0YWlsZWQgLSBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByYXcgdmFsaWRhdGlvbiBkYXRhXG4gIC8vICAgLSBmdWxsTWVzc2FnZXMgKGJvb2xlYW4pIC0gSWYgYHRydWVgIChkZWZhdWx0KSB0aGUgYXR0cmlidXRlIG5hbWUgaXMgcHJlcGVuZGVkIHRvIHRoZSBlcnJvci5cbiAgLy9cbiAgLy8gUGxlYXNlIG5vdGUgdGhhdCB0aGUgb3B0aW9ucyBhcmUgYWxzbyBwYXNzZWQgdG8gZWFjaCB2YWxpZGF0b3IuXG4gIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB2Lm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgdmFyIHJlc3VsdHMgPSB2LnJ1blZhbGlkYXRpb25zKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzLCBvcHRpb25zKVxuICAgICAgLCBhdHRyXG4gICAgICAsIHZhbGlkYXRvcjtcblxuICAgIGlmIChyZXN1bHRzLnNvbWUoZnVuY3Rpb24ocikgeyByZXR1cm4gdi5pc1Byb21pc2Uoci5lcnJvcik7IH0pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgdmFsaWRhdGUuYXN5bmMgaWYgeW91IHdhbnQgc3VwcG9ydCBmb3IgcHJvbWlzZXNcIik7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZS5wcm9jZXNzVmFsaWRhdGlvblJlc3VsdHMocmVzdWx0cywgb3B0aW9ucyk7XG4gIH07XG5cbiAgdmFyIHYgPSB2YWxpZGF0ZTtcblxuICAvLyBDb3BpZXMgb3ZlciBhdHRyaWJ1dGVzIGZyb20gb25lIG9yIG1vcmUgc291cmNlcyB0byBhIHNpbmdsZSBkZXN0aW5hdGlvbi5cbiAgLy8gVmVyeSBtdWNoIHNpbWlsYXIgdG8gdW5kZXJzY29yZSdzIGV4dGVuZC5cbiAgLy8gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIHRoZSB0YXJnZXQgb2JqZWN0IGFuZCB0aGUgcmVtYWluaW5nIGFyZ3VtZW50cyB3aWxsIGJlXG4gIC8vIHVzZWQgYXMgc291cmNlcy5cbiAgdi5leHRlbmQgPSBmdW5jdGlvbihvYmopIHtcbiAgICBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIGF0dHIgaW4gc291cmNlKSB7XG4gICAgICAgIG9ialthdHRyXSA9IHNvdXJjZVthdHRyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIHYuZXh0ZW5kKHZhbGlkYXRlLCB7XG4gICAgLy8gVGhpcyBpcyB0aGUgdmVyc2lvbiBvZiB0aGUgbGlicmFyeSBhcyBhIHNlbXZlci5cbiAgICAvLyBUaGUgdG9TdHJpbmcgZnVuY3Rpb24gd2lsbCBhbGxvdyBpdCB0byBiZSBjb2VyY2VkIGludG8gYSBzdHJpbmdcbiAgICB2ZXJzaW9uOiB7XG4gICAgICBtYWpvcjogMCxcbiAgICAgIG1pbm9yOiAxMyxcbiAgICAgIHBhdGNoOiAxLFxuICAgICAgbWV0YWRhdGE6IG51bGwsXG4gICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2ZXJzaW9uID0gdi5mb3JtYXQoXCIle21ham9yfS4le21pbm9yfS4le3BhdGNofVwiLCB2LnZlcnNpb24pO1xuICAgICAgICBpZiAoIXYuaXNFbXB0eSh2LnZlcnNpb24ubWV0YWRhdGEpKSB7XG4gICAgICAgICAgdmVyc2lvbiArPSBcIitcIiArIHYudmVyc2lvbi5tZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQmVsb3cgaXMgdGhlIGRlcGVuZGVuY2llcyB0aGF0IGFyZSB1c2VkIGluIHZhbGlkYXRlLmpzXG5cbiAgICAvLyBUaGUgY29uc3RydWN0b3Igb2YgdGhlIFByb21pc2UgaW1wbGVtZW50YXRpb24uXG4gICAgLy8gSWYgeW91IGFyZSB1c2luZyBRLmpzLCBSU1ZQIG9yIGFueSBvdGhlciBBKyBjb21wYXRpYmxlIGltcGxlbWVudGF0aW9uXG4gICAgLy8gb3ZlcnJpZGUgdGhpcyBhdHRyaWJ1dGUgdG8gYmUgdGhlIGNvbnN0cnVjdG9yIG9mIHRoYXQgcHJvbWlzZS5cbiAgICAvLyBTaW5jZSBqUXVlcnkgcHJvbWlzZXMgYXJlbid0IEErIGNvbXBhdGlibGUgdGhleSB3b24ndCB3b3JrLlxuICAgIFByb21pc2U6IHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiID8gUHJvbWlzZSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIG51bGwsXG5cbiAgICBFTVBUWV9TVFJJTkdfUkVHRVhQOiAvXlxccyokLyxcblxuICAgIC8vIFJ1bnMgdGhlIHZhbGlkYXRvcnMgc3BlY2lmaWVkIGJ5IHRoZSBjb25zdHJhaW50cyBvYmplY3QuXG4gICAgLy8gV2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgdGhlIGZvcm1hdDpcbiAgICAvLyAgICAgW3thdHRyaWJ1dGU6IFwiPGF0dHJpYnV0ZSBuYW1lPlwiLCBlcnJvcjogXCI8dmFsaWRhdGlvbiByZXN1bHQ+XCJ9LCAuLi5dXG4gICAgcnVuVmFsaWRhdGlvbnM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IFtdXG4gICAgICAgICwgYXR0clxuICAgICAgICAsIHZhbGlkYXRvck5hbWVcbiAgICAgICAgLCB2YWx1ZVxuICAgICAgICAsIHZhbGlkYXRvcnNcbiAgICAgICAgLCB2YWxpZGF0b3JcbiAgICAgICAgLCB2YWxpZGF0b3JPcHRpb25zXG4gICAgICAgICwgZXJyb3I7XG5cbiAgICAgIGlmICh2LmlzRG9tRWxlbWVudChhdHRyaWJ1dGVzKSB8fCB2LmlzSnF1ZXJ5RWxlbWVudChhdHRyaWJ1dGVzKSkge1xuICAgICAgICBhdHRyaWJ1dGVzID0gdi5jb2xsZWN0Rm9ybVZhbHVlcyhhdHRyaWJ1dGVzKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcHMgdGhyb3VnaCBlYWNoIGNvbnN0cmFpbnRzLCBmaW5kcyB0aGUgY29ycmVjdCB2YWxpZGF0b3IgYW5kIHJ1biBpdC5cbiAgICAgIGZvciAoYXR0ciBpbiBjb25zdHJhaW50cykge1xuICAgICAgICB2YWx1ZSA9IHYuZ2V0RGVlcE9iamVjdFZhbHVlKGF0dHJpYnV0ZXMsIGF0dHIpO1xuICAgICAgICAvLyBUaGlzIGFsbG93cyB0aGUgY29uc3RyYWludHMgZm9yIGFuIGF0dHJpYnV0ZSB0byBiZSBhIGZ1bmN0aW9uLlxuICAgICAgICAvLyBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdmFsdWUsIGF0dHJpYnV0ZSBuYW1lLCB0aGUgY29tcGxldGUgZGljdCBvZlxuICAgICAgICAvLyBhdHRyaWJ1dGVzIGFzIHdlbGwgYXMgdGhlIG9wdGlvbnMgYW5kIGNvbnN0cmFpbnRzIHBhc3NlZCBpbi5cbiAgICAgICAgLy8gVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3Ugd2FudCB0byBoYXZlIGRpZmZlcmVudFxuICAgICAgICAvLyB2YWxpZGF0aW9ucyBkZXBlbmRpbmcgb24gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgICAgdmFsaWRhdG9ycyA9IHYucmVzdWx0KGNvbnN0cmFpbnRzW2F0dHJdLCB2YWx1ZSwgYXR0cmlidXRlcywgYXR0ciwgb3B0aW9ucywgY29uc3RyYWludHMpO1xuXG4gICAgICAgIGZvciAodmFsaWRhdG9yTmFtZSBpbiB2YWxpZGF0b3JzKSB7XG4gICAgICAgICAgdmFsaWRhdG9yID0gdi52YWxpZGF0b3JzW3ZhbGlkYXRvck5hbWVdO1xuXG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gdi5mb3JtYXQoXCJVbmtub3duIHZhbGlkYXRvciAle25hbWV9XCIsIHtuYW1lOiB2YWxpZGF0b3JOYW1lfSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhbGlkYXRvck9wdGlvbnMgPSB2YWxpZGF0b3JzW3ZhbGlkYXRvck5hbWVdO1xuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBvcHRpb25zIHRvIGJlIGEgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiB3aWxsIGJlXG4gICAgICAgICAgLy8gY2FsbGVkIHdpdGggdGhlIHZhbHVlLCBhdHRyaWJ1dGUgbmFtZSwgdGhlIGNvbXBsZXRlIGRpY3Qgb2ZcbiAgICAgICAgICAvLyBhdHRyaWJ1dGVzIGFzIHdlbGwgYXMgdGhlIG9wdGlvbnMgYW5kIGNvbnN0cmFpbnRzIHBhc3NlZCBpbi5cbiAgICAgICAgICAvLyBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGhhdmUgZGlmZmVyZW50XG4gICAgICAgICAgLy8gdmFsaWRhdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICAgICAgdmFsaWRhdG9yT3B0aW9ucyA9IHYucmVzdWx0KHZhbGlkYXRvck9wdGlvbnMsIHZhbHVlLCBhdHRyaWJ1dGVzLCBhdHRyLCBvcHRpb25zLCBjb25zdHJhaW50cyk7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3JPcHRpb25zKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogYXR0cixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdG9yTmFtZSxcbiAgICAgICAgICAgIGdsb2JhbE9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgb3B0aW9uczogdmFsaWRhdG9yT3B0aW9ucyxcbiAgICAgICAgICAgIGVycm9yOiB2YWxpZGF0b3IuY2FsbCh2YWxpZGF0b3IsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgb3B0aW9ucylcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9LFxuXG4gICAgLy8gVGFrZXMgdGhlIG91dHB1dCBmcm9tIHJ1blZhbGlkYXRpb25zIGFuZCBjb252ZXJ0cyBpdCB0byB0aGUgY29ycmVjdFxuICAgIC8vIG91dHB1dCBmb3JtYXQuXG4gICAgcHJvY2Vzc1ZhbGlkYXRpb25SZXN1bHRzOiBmdW5jdGlvbihlcnJvcnMsIG9wdGlvbnMpIHtcbiAgICAgIGVycm9ycyA9IHYucHJ1bmVFbXB0eUVycm9ycyhlcnJvcnMsIG9wdGlvbnMpO1xuICAgICAgZXJyb3JzID0gdi5leHBhbmRNdWx0aXBsZUVycm9ycyhlcnJvcnMsIG9wdGlvbnMpO1xuICAgICAgZXJyb3JzID0gdi5jb252ZXJ0RXJyb3JNZXNzYWdlcyhlcnJvcnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgXCJncm91cGVkXCI7XG5cbiAgICAgIGlmICh0eXBlb2Ygdi5mb3JtYXR0ZXJzW2Zvcm1hdF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXJyb3JzID0gdi5mb3JtYXR0ZXJzW2Zvcm1hdF0oZXJyb3JzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih2LmZvcm1hdChcIlVua25vd24gZm9ybWF0ICV7Zm9ybWF0fVwiLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2LmlzRW1wdHkoZXJyb3JzKSA/IHVuZGVmaW5lZCA6IGVycm9ycztcbiAgICB9LFxuXG4gICAgLy8gUnVucyB0aGUgdmFsaWRhdGlvbnMgd2l0aCBzdXBwb3J0IGZvciBwcm9taXNlcy5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IGlzIHNldHRsZWQgd2hlbiBhbGwgdGhlXG4gICAgLy8gdmFsaWRhdGlvbiBwcm9taXNlcyBoYXZlIGJlZW4gY29tcGxldGVkLlxuICAgIC8vIEl0IGNhbiBiZSBjYWxsZWQgZXZlbiBpZiBubyB2YWxpZGF0aW9ucyByZXR1cm5lZCBhIHByb21pc2UuXG4gICAgYXN5bmM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHYuYXN5bmMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBXcmFwRXJyb3JzID0gb3B0aW9ucy53cmFwRXJyb3JzIHx8IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgfTtcblxuICAgICAgLy8gUmVtb3ZlcyB1bmtub3duIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChvcHRpb25zLmNsZWFuQXR0cmlidXRlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHYuY2xlYW5BdHRyaWJ1dGVzKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlc3VsdHMgPSB2LnJ1blZhbGlkYXRpb25zKGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzLCBvcHRpb25zKTtcblxuICAgICAgcmV0dXJuIG5ldyB2LlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHYud2FpdEZvclJlc3VsdHMocmVzdWx0cykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZXJyb3JzID0gdi5wcm9jZXNzVmFsaWRhdGlvblJlc3VsdHMocmVzdWx0cywgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKGVycm9ycykge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBXcmFwRXJyb3JzKGVycm9ycywgb3B0aW9ucywgYXR0cmlidXRlcywgY29uc3RyYWludHMpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShhdHRyaWJ1dGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzaW5nbGU6IGZ1bmN0aW9uKHZhbHVlLCBjb25zdHJhaW50cywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB2LnNpbmdsZS5vcHRpb25zLCBvcHRpb25zLCB7XG4gICAgICAgIGZvcm1hdDogXCJmbGF0XCIsXG4gICAgICAgIGZ1bGxNZXNzYWdlczogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHYoe3NpbmdsZTogdmFsdWV9LCB7c2luZ2xlOiBjb25zdHJhaW50c30sIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gYWxsIHByb21pc2VzIGluIHRoZSByZXN1bHRzIGFycmF5XG4gICAgLy8gYXJlIHNldHRsZWQuIFRoZSBwcm9taXNlIHJldHVybmVkIGZyb20gdGhpcyBmdW5jdGlvbiBpcyBhbHdheXMgcmVzb2x2ZWQsXG4gICAgLy8gbmV2ZXIgcmVqZWN0ZWQuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBtb2RpZmllcyB0aGUgaW5wdXQgYXJndW1lbnQsIGl0IHJlcGxhY2VzIHRoZSBwcm9taXNlc1xuICAgIC8vIHdpdGggdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIHByb21pc2UuXG4gICAgd2FpdEZvclJlc3VsdHM6IGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgIC8vIENyZWF0ZSBhIHNlcXVlbmNlIG9mIGFsbCB0aGUgcmVzdWx0cyBzdGFydGluZyB3aXRoIGEgcmVzb2x2ZWQgcHJvbWlzZS5cbiAgICAgIHJldHVybiByZXN1bHRzLnJlZHVjZShmdW5jdGlvbihtZW1vLCByZXN1bHQpIHtcbiAgICAgICAgLy8gSWYgdGhpcyByZXN1bHQgaXNuJ3QgYSBwcm9taXNlIHNraXAgaXQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICBpZiAoIXYuaXNQcm9taXNlKHJlc3VsdC5lcnJvcikpIHtcbiAgICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtZW1vLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5lcnJvci50aGVuKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICByZXN1bHQuZXJyb3IgPSBlcnJvciB8fCBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sIG5ldyB2LlByb21pc2UoZnVuY3Rpb24ocikgeyByKCk7IH0pKTsgLy8gQSByZXNvbHZlZCBwcm9taXNlXG4gICAgfSxcblxuICAgIC8vIElmIHRoZSBnaXZlbiBhcmd1bWVudCBpcyBhIGNhbGw6IGZ1bmN0aW9uIHRoZSBhbmQ6IGZ1bmN0aW9uIHJldHVybiB0aGUgdmFsdWVcbiAgICAvLyBvdGhlcndpc2UganVzdCByZXR1cm4gdGhlIHZhbHVlLiBBZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCBhc1xuICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24uXG4gICAgLy8gRXhhbXBsZTpcbiAgICAvLyBgYGBcbiAgICAvLyByZXN1bHQoJ2ZvbycpIC8vICdmb28nXG4gICAgLy8gcmVzdWx0KE1hdGgubWF4LCAxLCAyKSAvLyAyXG4gICAgLy8gYGBgXG4gICAgcmVzdWx0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyBpZiB0aGUgdmFsdWUgaXMgYSBudW1iZXIuIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgY29uc2lkZXIgTmFOIGFcbiAgICAvLyBudW1iZXIgbGlrZSBtYW55IG90aGVyIGBpc051bWJlcmAgZnVuY3Rpb25zIGRvLlxuICAgIGlzTnVtYmVyOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgb2JqZWN0IGlzIG5vdCBhIGZ1bmN0aW9uXG4gICAgaXNGdW5jdGlvbjogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG4gICAgfSxcblxuICAgIC8vIEEgc2ltcGxlIGNoZWNrIHRvIHZlcmlmeSB0aGF0IHRoZSB2YWx1ZSBpcyBhbiBpbnRlZ2VyLiBVc2VzIGBpc051bWJlcmBcbiAgICAvLyBhbmQgYSBzaW1wbGUgbW9kdWxvIGNoZWNrLlxuICAgIGlzSW50ZWdlcjogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2LmlzTnVtYmVyKHZhbHVlKSAmJiB2YWx1ZSAlIDEgPT09IDA7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyBpZiB0aGUgdmFsdWUgaXMgYSBib29sZWFuXG4gICAgaXNCb29sZWFuOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xuICAgIH0sXG5cbiAgICAvLyBVc2VzIHRoZSBgT2JqZWN0YCBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgZ2l2ZW4gYXJndW1lbnQgaXMgYW4gb2JqZWN0LlxuICAgIGlzT2JqZWN0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT09IE9iamVjdChvYmopO1xuICAgIH0sXG5cbiAgICAvLyBTaW1wbHkgY2hlY2tzIGlmIHRoZSBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgYSBkYXRlXG4gICAgaXNEYXRlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBEYXRlO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBvYmplY3QgaXMgYG51bGxgIG9mIGB1bmRlZmluZWRgXG4gICAgaXNEZWZpbmVkOiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgb2JqICE9PSB1bmRlZmluZWQ7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyBpZiB0aGUgZ2l2ZW4gYXJndW1lbnQgaXMgYSBwcm9taXNlLiBBbnl0aGluZyB3aXRoIGEgYHRoZW5gXG4gICAgLy8gZnVuY3Rpb24gaXMgY29uc2lkZXJlZCBhIHByb21pc2UuXG4gICAgaXNQcm9taXNlOiBmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gISFwICYmIHYuaXNGdW5jdGlvbihwLnRoZW4pO1xuICAgIH0sXG5cbiAgICBpc0pxdWVyeUVsZW1lbnQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBvICYmIHYuaXNTdHJpbmcoby5qcXVlcnkpO1xuICAgIH0sXG5cbiAgICBpc0RvbUVsZW1lbnQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIGlmICghbykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghby5xdWVyeVNlbGVjdG9yQWxsIHx8ICFvLnF1ZXJ5U2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5pc09iamVjdChkb2N1bWVudCkgJiYgbyA9PT0gZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM4NDM4MC82OTkzMDRcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBvIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbyAmJlxuICAgICAgICAgIHR5cGVvZiBvID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgbyAhPT0gbnVsbCAmJlxuICAgICAgICAgIG8ubm9kZVR5cGUgPT09IDEgJiZcbiAgICAgICAgICB0eXBlb2Ygby5ub2RlTmFtZSA9PT0gXCJzdHJpbmdcIjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNFbXB0eTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBhdHRyO1xuXG4gICAgICAvLyBOdWxsIGFuZCB1bmRlZmluZWQgYXJlIGVtcHR5XG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZnVuY3Rpb25zIGFyZSBub24gZW1wdHlcbiAgICAgIGlmICh2LmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hpdGVzcGFjZSBvbmx5IHN0cmluZ3MgYXJlIGVtcHR5XG4gICAgICBpZiAodi5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHYuRU1QVFlfU1RSSU5HX1JFR0VYUC50ZXN0KHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIGFycmF5cyB3ZSB1c2UgdGhlIGxlbmd0aCBwcm9wZXJ0eVxuICAgICAgaWYgKHYuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gRGF0ZXMgaGF2ZSBubyBhdHRyaWJ1dGVzIGJ1dCBhcmVuJ3QgZW1wdHlcbiAgICAgIGlmICh2LmlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBmaW5kIGF0IGxlYXN0IG9uZSBwcm9wZXJ0eSB3ZSBjb25zaWRlciBpdCBub24gZW1wdHlcbiAgICAgIGlmICh2LmlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGF0dHIgaW4gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gRm9ybWF0cyB0aGUgc3BlY2lmaWVkIHN0cmluZ3Mgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzIGxpa2Ugc286XG4gICAgLy8gYGBgXG4gICAgLy8gZm9ybWF0KFwiRm9vOiAle2Zvb31cIiwge2ZvbzogXCJiYXJcIn0pIC8vIFwiRm9vIGJhclwiXG4gICAgLy8gYGBgXG4gICAgLy8gSWYgeW91IHdhbnQgdG8gd3JpdGUgJXsuLi59IHdpdGhvdXQgaGF2aW5nIGl0IHJlcGxhY2VkIHNpbXBseVxuICAgIC8vIHByZWZpeCBpdCB3aXRoICUgbGlrZSB0aGlzIGBGb286ICUle2Zvb31gIGFuZCBpdCB3aWxsIGJlIHJldHVybmVkXG4gICAgLy8gYXMgYFwiRm9vOiAle2Zvb31cImBcbiAgICBmb3JtYXQ6IHYuZXh0ZW5kKGZ1bmN0aW9uKHN0ciwgdmFscykge1xuICAgICAgaWYgKCF2LmlzU3RyaW5nKHN0cikpIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSh2LmZvcm1hdC5GT1JNQVRfUkVHRVhQLCBmdW5jdGlvbihtMCwgbTEsIG0yKSB7XG4gICAgICAgIGlmIChtMSA9PT0gJyUnKSB7XG4gICAgICAgICAgcmV0dXJuIFwiJXtcIiArIG0yICsgXCJ9XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWxzW20yXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIHtcbiAgICAgIC8vIEZpbmRzICV7a2V5fSBzdHlsZSBwYXR0ZXJucyBpbiB0aGUgZ2l2ZW4gc3RyaW5nXG4gICAgICBGT1JNQVRfUkVHRVhQOiAvKCU/KSVcXHsoW15cXH1dKylcXH0vZ1xuICAgIH0pLFxuXG4gICAgLy8gXCJQcmV0dGlmaWVzXCIgdGhlIGdpdmVuIHN0cmluZy5cbiAgICAvLyBQcmV0dGlmeWluZyBtZWFucyByZXBsYWNpbmcgWy5cXF8tXSB3aXRoIHNwYWNlcyBhcyB3ZWxsIGFzIHNwbGl0dGluZ1xuICAgIC8vIGNhbWVsIGNhc2Ugd29yZHMuXG4gICAgcHJldHRpZnk6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgaWYgKHYuaXNOdW1iZXIoc3RyKSkge1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbW9yZSB0aGFuIDIgZGVjaW1hbHMgcm91bmQgaXQgdG8gdHdvXG4gICAgICAgIGlmICgoc3RyICogMTAwKSAlIDEgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gXCJcIiArIHN0cjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChNYXRoLnJvdW5kKHN0ciAqIDEwMCkgLyAxMDApLnRvRml4ZWQoMik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNBcnJheShzdHIpKSB7XG4gICAgICAgIHJldHVybiBzdHIubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHYucHJldHRpZnkocyk7IH0pLmpvaW4oXCIsIFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNPYmplY3Qoc3RyKSkge1xuICAgICAgICBpZiAoIXYuaXNEZWZpbmVkKHN0ci50b1N0cmluZykpIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdHIudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIHRoZSBzdHJpbmcgaXMgYWN0dWFsbHkgYSBzdHJpbmdcbiAgICAgIHN0ciA9IFwiXCIgKyBzdHI7XG5cbiAgICAgIHJldHVybiBzdHJcbiAgICAgICAgLy8gU3BsaXRzIGtleXMgc2VwYXJhdGVkIGJ5IHBlcmlvZHNcbiAgICAgICAgLnJlcGxhY2UoLyhbXlxcc10pXFwuKFteXFxzXSkvZywgJyQxICQyJylcbiAgICAgICAgLy8gUmVtb3ZlcyBiYWNrc2xhc2hlc1xuICAgICAgICAucmVwbGFjZSgvXFxcXCsvZywgJycpXG4gICAgICAgIC8vIFJlcGxhY2VzIC0gYW5kIC0gd2l0aCBzcGFjZVxuICAgICAgICAucmVwbGFjZSgvW18tXS9nLCAnICcpXG4gICAgICAgIC8vIFNwbGl0cyBjYW1lbCBjYXNlZCB3b3Jkc1xuICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgZnVuY3Rpb24obTAsIG0xLCBtMikge1xuICAgICAgICAgIHJldHVybiBcIlwiICsgbTEgKyBcIiBcIiArIG0yLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG5cbiAgICBzdHJpbmdpZnlWYWx1ZTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBwcmV0dGlmeSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5wcmV0dGlmeSB8fCB2LnByZXR0aWZ5O1xuICAgICAgcmV0dXJuIHByZXR0aWZ5KHZhbHVlKTtcbiAgICB9LFxuXG4gICAgaXNTdHJpbmc6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbiAgICB9LFxuXG4gICAgaXNBcnJheTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIGlmIHRoZSBvYmplY3QgaXMgYSBoYXNoLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIGFuIG9iamVjdCB0aGF0XG4gICAgLy8gaXMgbmVpdGhlciBhbiBhcnJheSBub3IgYSBmdW5jdGlvbi5cbiAgICBpc0hhc2g6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdi5pc09iamVjdCh2YWx1ZSkgJiYgIXYuaXNBcnJheSh2YWx1ZSkgJiYgIXYuaXNGdW5jdGlvbih2YWx1ZSk7XG4gICAgfSxcblxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbihvYmosIHZhbHVlKSB7XG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHYuaXNBcnJheShvYmopKSB7XG4gICAgICAgIHJldHVybiBvYmouaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlIGluIG9iajtcbiAgICB9LFxuXG4gICAgdW5pcXVlOiBmdW5jdGlvbihhcnJheSkge1xuICAgICAgaWYgKCF2LmlzQXJyYXkoYXJyYXkpKSB7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheS5maWx0ZXIoZnVuY3Rpb24oZWwsIGluZGV4LCBhcnJheSkge1xuICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZihlbCkgPT0gaW5kZXg7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgZm9yRWFjaEtleUluS2V5cGF0aDogZnVuY3Rpb24ob2JqZWN0LCBrZXlwYXRoLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCF2LmlzU3RyaW5nKGtleXBhdGgpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBrZXkgPSBcIlwiXG4gICAgICAgICwgaVxuICAgICAgICAsIGVzY2FwZSA9IGZhbHNlO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cGF0aC5sZW5ndGg7ICsraSkge1xuICAgICAgICBzd2l0Y2ggKGtleXBhdGhbaV0pIHtcbiAgICAgICAgICBjYXNlICcuJzpcbiAgICAgICAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgICAgICAgZXNjYXBlID0gZmFsc2U7XG4gICAgICAgICAgICAgIGtleSArPSAnLic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvYmplY3QgPSBjYWxsYmFjayhvYmplY3QsIGtleSwgZmFsc2UpO1xuICAgICAgICAgICAgICBrZXkgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdcXFxcJzpcbiAgICAgICAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgICAgICAgZXNjYXBlID0gZmFsc2U7XG4gICAgICAgICAgICAgIGtleSArPSAnXFxcXCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZXNjYXBlID0gZmFsc2U7XG4gICAgICAgICAgICBrZXkgKz0ga2V5cGF0aFtpXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYWxsYmFjayhvYmplY3QsIGtleSwgdHJ1ZSk7XG4gICAgfSxcblxuICAgIGdldERlZXBPYmplY3RWYWx1ZTogZnVuY3Rpb24ob2JqLCBrZXlwYXRoKSB7XG4gICAgICBpZiAoIXYuaXNPYmplY3Qob2JqKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdi5mb3JFYWNoS2V5SW5LZXlwYXRoKG9iaiwga2V5cGF0aCwgZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICAgICAgaWYgKHYuaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIFRoaXMgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHZhbHVlcyBvZiB0aGUgZm9ybS5cbiAgICAvLyBJdCB1c2VzIHRoZSBpbnB1dCBuYW1lIGFzIGtleSBhbmQgdGhlIHZhbHVlIGFzIHZhbHVlXG4gICAgLy8gU28gZm9yIGV4YW1wbGUgdGhpczpcbiAgICAvLyA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZW1haWxcIiB2YWx1ZT1cImZvb0BiYXIuY29tXCIgLz5cbiAgICAvLyB3b3VsZCByZXR1cm46XG4gICAgLy8ge2VtYWlsOiBcImZvb0BiYXIuY29tXCJ9XG4gICAgY29sbGVjdEZvcm1WYWx1ZXM6IGZ1bmN0aW9uKGZvcm0sIG9wdGlvbnMpIHtcbiAgICAgIHZhciB2YWx1ZXMgPSB7fVxuICAgICAgICAsIGlcbiAgICAgICAgLCBqXG4gICAgICAgICwgaW5wdXRcbiAgICAgICAgLCBpbnB1dHNcbiAgICAgICAgLCBvcHRpb25cbiAgICAgICAgLCB2YWx1ZTtcblxuICAgICAgaWYgKHYuaXNKcXVlcnlFbGVtZW50KGZvcm0pKSB7XG4gICAgICAgIGZvcm0gPSBmb3JtWzBdO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgIGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0W25hbWVdLCB0ZXh0YXJlYVtuYW1lXVwiKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW5wdXQgPSBpbnB1dHMuaXRlbShpKTtcblxuICAgICAgICBpZiAodi5pc0RlZmluZWQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pZ25vcmVkXCIpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5hbWUgPSBpbnB1dC5uYW1lLnJlcGxhY2UoL1xcLi9nLCBcIlxcXFxcXFxcLlwiKTtcbiAgICAgICAgdmFsdWUgPSB2LnNhbml0aXplRm9ybVZhbHVlKGlucHV0LnZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlID8gK3ZhbHVlIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICBpZiAoaW5wdXQuYXR0cmlidXRlcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVzW25hbWVdIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gaW5wdXQuY2hlY2tlZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudHlwZSA9PT0gXCJyYWRpb1wiKSB7XG4gICAgICAgICAgaWYgKCFpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlc1tuYW1lXSB8fCBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwic2VsZWN0W25hbWVdXCIpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnB1dCA9IGlucHV0cy5pdGVtKGkpO1xuICAgICAgICBpZiAodi5pc0RlZmluZWQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pZ25vcmVkXCIpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0Lm11bHRpcGxlKSB7XG4gICAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgICBmb3IgKGogaW4gaW5wdXQub3B0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9uID0gaW5wdXQub3B0aW9uc1tqXTtcbiAgICAgICAgICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHYuc2FuaXRpemVGb3JtVmFsdWUob3B0aW9uLnZhbHVlLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfdmFsID0gdHlwZW9mIGlucHV0Lm9wdGlvbnNbaW5wdXQuc2VsZWN0ZWRJbmRleF0gIT09ICd1bmRlZmluZWQnID8gaW5wdXQub3B0aW9uc1tpbnB1dC5zZWxlY3RlZEluZGV4XS52YWx1ZSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovICcnO1xuICAgICAgICAgIHZhbHVlID0gdi5zYW5pdGl6ZUZvcm1WYWx1ZShfdmFsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9LFxuXG4gICAgc2FuaXRpemVGb3JtVmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy50cmltICYmIHYuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5udWxsaWZ5ICE9PSBmYWxzZSAmJiB2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgY2FwaXRhbGl6ZTogZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAoIXYuaXNTdHJpbmcoc3RyKSkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0clswXS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYWxsIGVycm9ycyB3aG8ncyBlcnJvciBhdHRyaWJ1dGUgaXMgZW1wdHkgKG51bGwgb3IgdW5kZWZpbmVkKVxuICAgIHBydW5lRW1wdHlFcnJvcnM6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgcmV0dXJuIGVycm9ycy5maWx0ZXIoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuICF2LmlzRW1wdHkoZXJyb3IuZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIEluXG4gICAgLy8gW3tlcnJvcjogW1wiZXJyMVwiLCBcImVycjJcIl0sIC4uLn1dXG4gICAgLy8gT3V0XG4gICAgLy8gW3tlcnJvcjogXCJlcnIxXCIsIC4uLn0sIHtlcnJvcjogXCJlcnIyXCIsIC4uLn1dXG4gICAgLy9cbiAgICAvLyBBbGwgYXR0cmlidXRlcyBpbiBhbiBlcnJvciB3aXRoIG11bHRpcGxlIG1lc3NhZ2VzIGFyZSBkdXBsaWNhdGVkXG4gICAgLy8gd2hlbiBleHBhbmRpbmcgdGhlIGVycm9ycy5cbiAgICBleHBhbmRNdWx0aXBsZUVycm9yczogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICB2YXIgcmV0ID0gW107XG4gICAgICBlcnJvcnMuZm9yRWFjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAvLyBSZW1vdmVzIGVycm9ycyB3aXRob3V0IGEgbWVzc2FnZVxuICAgICAgICBpZiAodi5pc0FycmF5KGVycm9yLmVycm9yKSkge1xuICAgICAgICAgIGVycm9yLmVycm9yLmZvckVhY2goZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICByZXQucHVzaCh2LmV4dGVuZCh7fSwgZXJyb3IsIHtlcnJvcjogbXNnfSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldC5wdXNoKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICAvLyBDb252ZXJ0cyB0aGUgZXJyb3IgbWVzYWdlcyBieSBwcmVwZW5kaW5nIHRoZSBhdHRyaWJ1dGUgbmFtZSB1bmxlc3MgdGhlXG4gICAgLy8gbWVzc2FnZSBpcyBwcmVmaXhlZCBieSBeXG4gICAgY29udmVydEVycm9yTWVzc2FnZXM6IGZ1bmN0aW9uKGVycm9ycywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgIHZhciByZXQgPSBbXVxuICAgICAgICAsIHByZXR0aWZ5ID0gb3B0aW9ucy5wcmV0dGlmeSB8fCB2LnByZXR0aWZ5O1xuICAgICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24oZXJyb3JJbmZvKSB7XG4gICAgICAgIHZhciBlcnJvciA9IHYucmVzdWx0KGVycm9ySW5mby5lcnJvcixcbiAgICAgICAgICAgIGVycm9ySW5mby52YWx1ZSxcbiAgICAgICAgICAgIGVycm9ySW5mby5hdHRyaWJ1dGUsXG4gICAgICAgICAgICBlcnJvckluZm8ub3B0aW9ucyxcbiAgICAgICAgICAgIGVycm9ySW5mby5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgZXJyb3JJbmZvLmdsb2JhbE9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdi5pc1N0cmluZyhlcnJvcikpIHtcbiAgICAgICAgICByZXQucHVzaChlcnJvckluZm8pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvclswXSA9PT0gJ14nKSB7XG4gICAgICAgICAgZXJyb3IgPSBlcnJvci5zbGljZSgxKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmZ1bGxNZXNzYWdlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBlcnJvciA9IHYuY2FwaXRhbGl6ZShwcmV0dGlmeShlcnJvckluZm8uYXR0cmlidXRlKSkgKyBcIiBcIiArIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yID0gZXJyb3IucmVwbGFjZSgvXFxcXFxcXi9nLCBcIl5cIik7XG4gICAgICAgIGVycm9yID0gdi5mb3JtYXQoZXJyb3IsIHtcbiAgICAgICAgICB2YWx1ZTogdi5zdHJpbmdpZnlWYWx1ZShlcnJvckluZm8udmFsdWUsIG9wdGlvbnMpXG4gICAgICAgIH0pO1xuICAgICAgICByZXQucHVzaCh2LmV4dGVuZCh7fSwgZXJyb3JJbmZvLCB7ZXJyb3I6IGVycm9yfSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICAvLyBJbjpcbiAgICAvLyBbe2F0dHJpYnV0ZTogXCI8YXR0cmlidXRlTmFtZT5cIiwgLi4ufV1cbiAgICAvLyBPdXQ6XG4gICAgLy8ge1wiPGF0dHJpYnV0ZU5hbWU+XCI6IFt7YXR0cmlidXRlOiBcIjxhdHRyaWJ1dGVOYW1lPlwiLCAuLi59XX1cbiAgICBncm91cEVycm9yc0J5QXR0cmlidXRlOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgIGVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHZhciBsaXN0ID0gcmV0W2Vycm9yLmF0dHJpYnV0ZV07XG4gICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgbGlzdC5wdXNoKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXRbZXJyb3IuYXR0cmlidXRlXSA9IFtlcnJvcl07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9LFxuXG4gICAgLy8gSW46XG4gICAgLy8gW3tlcnJvcjogXCI8bWVzc2FnZSAxPlwiLCAuLi59LCB7ZXJyb3I6IFwiPG1lc3NhZ2UgMj5cIiwgLi4ufV1cbiAgICAvLyBPdXQ6XG4gICAgLy8gW1wiPG1lc3NhZ2UgMT5cIiwgXCI8bWVzc2FnZSAyPlwiXVxuICAgIGZsYXR0ZW5FcnJvcnNUb0FycmF5OiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHJldHVybiBlcnJvcnNcbiAgICAgICAgLm1hcChmdW5jdGlvbihlcnJvcikgeyByZXR1cm4gZXJyb3IuZXJyb3I7IH0pXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24odmFsdWUsIGluZGV4LCBzZWxmKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4O1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY2xlYW5BdHRyaWJ1dGVzOiBmdW5jdGlvbihhdHRyaWJ1dGVzLCB3aGl0ZWxpc3QpIHtcbiAgICAgIGZ1bmN0aW9uIHdoaXRlbGlzdENyZWF0b3Iob2JqLCBrZXksIGxhc3QpIHtcbiAgICAgICAgaWYgKHYuaXNPYmplY3Qob2JqW2tleV0pKSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAob2JqW2tleV0gPSBsYXN0ID8gdHJ1ZSA6IHt9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRPYmplY3RXaGl0ZWxpc3Qod2hpdGVsaXN0KSB7XG4gICAgICAgIHZhciBvdyA9IHt9XG4gICAgICAgICAgLCBsYXN0T2JqZWN0XG4gICAgICAgICAgLCBhdHRyO1xuICAgICAgICBmb3IgKGF0dHIgaW4gd2hpdGVsaXN0KSB7XG4gICAgICAgICAgaWYgKCF3aGl0ZWxpc3RbYXR0cl0pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2LmZvckVhY2hLZXlJbktleXBhdGgob3csIGF0dHIsIHdoaXRlbGlzdENyZWF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYW5SZWN1cnNpdmUoYXR0cmlidXRlcywgd2hpdGVsaXN0KSB7XG4gICAgICAgIGlmICghdi5pc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJldCA9IHYuZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzKVxuICAgICAgICAgICwgd1xuICAgICAgICAgICwgYXR0cmlidXRlO1xuXG4gICAgICAgIGZvciAoYXR0cmlidXRlIGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICB3ID0gd2hpdGVsaXN0W2F0dHJpYnV0ZV07XG5cbiAgICAgICAgICBpZiAodi5pc09iamVjdCh3KSkge1xuICAgICAgICAgICAgcmV0W2F0dHJpYnV0ZV0gPSBjbGVhblJlY3Vyc2l2ZShyZXRbYXR0cmlidXRlXSwgdyk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdykge1xuICAgICAgICAgICAgZGVsZXRlIHJldFthdHRyaWJ1dGVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuXG4gICAgICBpZiAoIXYuaXNPYmplY3Qod2hpdGVsaXN0KSB8fCAhdi5pc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG5cbiAgICAgIHdoaXRlbGlzdCA9IGJ1aWxkT2JqZWN0V2hpdGVsaXN0KHdoaXRlbGlzdCk7XG4gICAgICByZXR1cm4gY2xlYW5SZWN1cnNpdmUoYXR0cmlidXRlcywgd2hpdGVsaXN0KTtcbiAgICB9LFxuXG4gICAgZXhwb3NlTW9kdWxlOiBmdW5jdGlvbih2YWxpZGF0ZSwgcm9vdCwgZXhwb3J0cywgbW9kdWxlLCBkZWZpbmUpIHtcbiAgICAgIGlmIChleHBvcnRzKSB7XG4gICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRzLnZhbGlkYXRlID0gdmFsaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290LnZhbGlkYXRlID0gdmFsaWRhdGU7XG4gICAgICAgIGlmICh2YWxpZGF0ZS5pc0Z1bmN0aW9uKGRlZmluZSkgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAgIGRlZmluZShbXSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdmFsaWRhdGU7IH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHdhcm46IGZ1bmN0aW9uKG1zZykge1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbdmFsaWRhdGUuanNdIFwiICsgbXNnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXJyb3I6IGZ1bmN0aW9uKG1zZykge1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlt2YWxpZGF0ZS5qc10gXCIgKyBtc2cpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFsaWRhdGUudmFsaWRhdG9ycyA9IHtcbiAgICAvLyBQcmVzZW5jZSB2YWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXNuJ3QgZW1wdHlcbiAgICBwcmVzZW5jZTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLmFsbG93RW1wdHkgIT09IGZhbHNlID8gIXYuaXNEZWZpbmVkKHZhbHVlKSA6IHYuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJjYW4ndCBiZSBibGFua1wiO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGVuZ3RoOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGFsbG93ZWRcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgaXMgPSBvcHRpb25zLmlzXG4gICAgICAgICwgbWF4aW11bSA9IG9wdGlvbnMubWF4aW11bVxuICAgICAgICAsIG1pbmltdW0gPSBvcHRpb25zLm1pbmltdW1cbiAgICAgICAgLCB0b2tlbml6ZXIgPSBvcHRpb25zLnRva2VuaXplciB8fCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuICAgICAgICAsIGVyclxuICAgICAgICAsIGVycm9ycyA9IFtdO1xuXG4gICAgICB2YWx1ZSA9IHRva2VuaXplcih2YWx1ZSk7XG4gICAgICB2YXIgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgaWYoIXYuaXNOdW1iZXIobGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubm90VmFsaWQgfHwgXCJoYXMgYW4gaW5jb3JyZWN0IGxlbmd0aFwiO1xuICAgICAgfVxuXG4gICAgICAvLyBJcyBjaGVja3NcbiAgICAgIGlmICh2LmlzTnVtYmVyKGlzKSAmJiBsZW5ndGggIT09IGlzKSB7XG4gICAgICAgIGVyciA9IG9wdGlvbnMud3JvbmdMZW5ndGggfHxcbiAgICAgICAgICB0aGlzLndyb25nTGVuZ3RoIHx8XG4gICAgICAgICAgXCJpcyB0aGUgd3JvbmcgbGVuZ3RoIChzaG91bGQgYmUgJXtjb3VudH0gY2hhcmFjdGVycylcIjtcbiAgICAgICAgZXJyb3JzLnB1c2godi5mb3JtYXQoZXJyLCB7Y291bnQ6IGlzfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5pc051bWJlcihtaW5pbXVtKSAmJiBsZW5ndGggPCBtaW5pbXVtKSB7XG4gICAgICAgIGVyciA9IG9wdGlvbnMudG9vU2hvcnQgfHxcbiAgICAgICAgICB0aGlzLnRvb1Nob3J0IHx8XG4gICAgICAgICAgXCJpcyB0b28gc2hvcnQgKG1pbmltdW0gaXMgJXtjb3VudH0gY2hhcmFjdGVycylcIjtcbiAgICAgICAgZXJyb3JzLnB1c2godi5mb3JtYXQoZXJyLCB7Y291bnQ6IG1pbmltdW19KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzTnVtYmVyKG1heGltdW0pICYmIGxlbmd0aCA+IG1heGltdW0pIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy50b29Mb25nIHx8XG4gICAgICAgICAgdGhpcy50b29Mb25nIHx8XG4gICAgICAgICAgXCJpcyB0b28gbG9uZyAobWF4aW11bSBpcyAle2NvdW50fSBjaGFyYWN0ZXJzKVwiO1xuICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChlcnIsIHtjb3VudDogbWF4aW11bX0pKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHwgZXJyb3JzO1xuICAgICAgfVxuICAgIH0sXG4gICAgbnVtZXJpY2FsaXR5OiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGZpbmVcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgZXJyb3JzID0gW11cbiAgICAgICAgLCBuYW1lXG4gICAgICAgICwgY291bnRcbiAgICAgICAgLCBjaGVja3MgPSB7XG4gICAgICAgICAgICBncmVhdGVyVGhhbjogICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA+IGM7IH0sXG4gICAgICAgICAgICBncmVhdGVyVGhhbk9yRXF1YWxUbzogZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA+PSBjOyB9LFxuICAgICAgICAgICAgZXF1YWxUbzogICAgICAgICAgICAgIGZ1bmN0aW9uKHYsIGMpIHsgcmV0dXJuIHYgPT09IGM7IH0sXG4gICAgICAgICAgICBsZXNzVGhhbjogICAgICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA8IGM7IH0sXG4gICAgICAgICAgICBsZXNzVGhhbk9yRXF1YWxUbzogICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA8PSBjOyB9LFxuICAgICAgICAgICAgZGl2aXNpYmxlQnk6ICAgICAgICAgIGZ1bmN0aW9uKHYsIGMpIHsgcmV0dXJuIHYgJSBjID09PSAwOyB9XG4gICAgICAgICAgfVxuICAgICAgICAsIHByZXR0aWZ5ID0gb3B0aW9ucy5wcmV0dGlmeSB8fFxuICAgICAgICAgIChnbG9iYWxPcHRpb25zICYmIGdsb2JhbE9wdGlvbnMucHJldHRpZnkpIHx8XG4gICAgICAgICAgdi5wcmV0dGlmeTtcblxuICAgICAgLy8gU3RyaWN0IHdpbGwgY2hlY2sgdGhhdCBpdCBpcyBhIHZhbGlkIGxvb2tpbmcgbnVtYmVyXG4gICAgICBpZiAodi5pc1N0cmluZyh2YWx1ZSkgJiYgb3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBcIl4tPygwfFsxLTldXFxcXGQqKVwiO1xuICAgICAgICBpZiAoIW9wdGlvbnMub25seUludGVnZXIpIHtcbiAgICAgICAgICBwYXR0ZXJuICs9IFwiKFxcXFwuXFxcXGQrKT9cIjtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuICs9IFwiJFwiO1xuXG4gICAgICAgIGlmICghKG5ldyBSZWdFeHAocGF0dGVybikudGVzdCh2YWx1ZSkpKSB7XG4gICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgICAgb3B0aW9ucy5ub3RWYWxpZCB8fFxuICAgICAgICAgICAgdGhpcy5ub3RWYWxpZCB8fFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBcIm11c3QgYmUgYSB2YWxpZCBudW1iZXJcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDb2VyY2UgdGhlIHZhbHVlIHRvIGEgbnVtYmVyIHVubGVzcyB3ZSdyZSBiZWluZyBzdHJpY3QuXG4gICAgICBpZiAob3B0aW9ucy5ub1N0cmluZ3MgIT09IHRydWUgJiYgdi5pc1N0cmluZyh2YWx1ZSkgJiYgIXYuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSArdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGl0J3Mgbm90IGEgbnVtYmVyIHdlIHNob3VsZG4ndCBjb250aW51ZSBzaW5jZSBpdCB3aWxsIGNvbXBhcmUgaXQuXG4gICAgICBpZiAoIXYuaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICBvcHRpb25zLm5vdFZhbGlkIHx8XG4gICAgICAgICAgdGhpcy5ub3RWYWxpZCB8fFxuICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgIFwiaXMgbm90IGEgbnVtYmVyXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIFNhbWUgbG9naWMgYXMgYWJvdmUsIHNvcnQgb2YuIERvbid0IGJvdGhlciB3aXRoIGNvbXBhcmlzb25zIGlmIHRoaXNcbiAgICAgIC8vIGRvZXNuJ3QgcGFzcy5cbiAgICAgIGlmIChvcHRpb25zLm9ubHlJbnRlZ2VyICYmICF2LmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgIG9wdGlvbnMubm90SW50ZWdlciB8fFxuICAgICAgICAgIHRoaXMubm90SW50ZWdlciB8fFxuICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgIFwibXVzdCBiZSBhbiBpbnRlZ2VyXCI7XG4gICAgICB9XG5cbiAgICAgIGZvciAobmFtZSBpbiBjaGVja3MpIHtcbiAgICAgICAgY291bnQgPSBvcHRpb25zW25hbWVdO1xuICAgICAgICBpZiAodi5pc051bWJlcihjb3VudCkgJiYgIWNoZWNrc1tuYW1lXSh2YWx1ZSwgY291bnQpKSB7XG4gICAgICAgICAgLy8gVGhpcyBwaWNrcyB0aGUgZGVmYXVsdCBtZXNzYWdlIGlmIHNwZWNpZmllZFxuICAgICAgICAgIC8vIEZvciBleGFtcGxlIHRoZSBncmVhdGVyVGhhbiBjaGVjayB1c2VzIHRoZSBtZXNzYWdlIGZyb21cbiAgICAgICAgICAvLyB0aGlzLm5vdEdyZWF0ZXJUaGFuIHNvIHdlIGNhcGl0YWxpemUgdGhlIG5hbWUgYW5kIHByZXBlbmQgXCJub3RcIlxuICAgICAgICAgIHZhciBrZXkgPSBcIm5vdFwiICsgdi5jYXBpdGFsaXplKG5hbWUpO1xuICAgICAgICAgIHZhciBtc2cgPSBvcHRpb25zW2tleV0gfHxcbiAgICAgICAgICAgIHRoaXNba2V5XSB8fFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBcIm11c3QgYmUgJXt0eXBlfSAle2NvdW50fVwiO1xuXG4gICAgICAgICAgZXJyb3JzLnB1c2godi5mb3JtYXQobXNnLCB7XG4gICAgICAgICAgICBjb3VudDogY291bnQsXG4gICAgICAgICAgICB0eXBlOiBwcmV0dGlmeShuYW1lKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5vZGQgJiYgdmFsdWUgJSAyICE9PSAxKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKG9wdGlvbnMubm90T2RkIHx8XG4gICAgICAgICAgICB0aGlzLm5vdE9kZCB8fFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBcIm11c3QgYmUgb2RkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZXZlbiAmJiB2YWx1ZSAlIDIgIT09IDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2gob3B0aW9ucy5ub3RFdmVuIHx8XG4gICAgICAgICAgICB0aGlzLm5vdEV2ZW4gfHxcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgICAgXCJtdXN0IGJlIGV2ZW5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHwgZXJyb3JzO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0ZXRpbWU6IHYuZXh0ZW5kKGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBpZiAoIXYuaXNGdW5jdGlvbih0aGlzLnBhcnNlKSB8fCAhdi5pc0Z1bmN0aW9uKHRoaXMuZm9ybWF0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3RoIHRoZSBwYXJzZSBhbmQgZm9ybWF0IGZ1bmN0aW9ucyBuZWVkcyB0byBiZSBzZXQgdG8gdXNlIHRoZSBkYXRldGltZS9kYXRlIHZhbGlkYXRvclwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBmaW5lXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgdmFyIGVyclxuICAgICAgICAsIGVycm9ycyA9IFtdXG4gICAgICAgICwgZWFybGllc3QgPSBvcHRpb25zLmVhcmxpZXN0ID8gdGhpcy5wYXJzZShvcHRpb25zLmVhcmxpZXN0LCBvcHRpb25zKSA6IE5hTlxuICAgICAgICAsIGxhdGVzdCA9IG9wdGlvbnMubGF0ZXN0ID8gdGhpcy5wYXJzZShvcHRpb25zLmxhdGVzdCwgb3B0aW9ucykgOiBOYU47XG5cbiAgICAgIHZhbHVlID0gdGhpcy5wYXJzZSh2YWx1ZSwgb3B0aW9ucyk7XG5cbiAgICAgIC8vIDg2NDAwMDAwIGlzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGluIGEgZGF5LCB0aGlzIGlzIHVzZWQgdG8gcmVtb3ZlXG4gICAgICAvLyB0aGUgdGltZSBmcm9tIHRoZSBkYXRlXG4gICAgICBpZiAoaXNOYU4odmFsdWUpIHx8IG9wdGlvbnMuZGF0ZU9ubHkgJiYgdmFsdWUgJSA4NjQwMDAwMCAhPT0gMCkge1xuICAgICAgICBlcnIgPSBvcHRpb25zLm5vdFZhbGlkIHx8XG4gICAgICAgICAgb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgdGhpcy5ub3RWYWxpZCB8fFxuICAgICAgICAgIFwibXVzdCBiZSBhIHZhbGlkIGRhdGVcIjtcbiAgICAgICAgcmV0dXJuIHYuZm9ybWF0KGVyciwge3ZhbHVlOiBhcmd1bWVudHNbMF19KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihlYXJsaWVzdCkgJiYgdmFsdWUgPCBlYXJsaWVzdCkge1xuICAgICAgICBlcnIgPSBvcHRpb25zLnRvb0Vhcmx5IHx8XG4gICAgICAgICAgb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgdGhpcy50b29FYXJseSB8fFxuICAgICAgICAgIFwibXVzdCBiZSBubyBlYXJsaWVyIHRoYW4gJXtkYXRlfVwiO1xuICAgICAgICBlcnIgPSB2LmZvcm1hdChlcnIsIHtcbiAgICAgICAgICB2YWx1ZTogdGhpcy5mb3JtYXQodmFsdWUsIG9wdGlvbnMpLFxuICAgICAgICAgIGRhdGU6IHRoaXMuZm9ybWF0KGVhcmxpZXN0LCBvcHRpb25zKVxuICAgICAgICB9KTtcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihsYXRlc3QpICYmIHZhbHVlID4gbGF0ZXN0KSB7XG4gICAgICAgIGVyciA9IG9wdGlvbnMudG9vTGF0ZSB8fFxuICAgICAgICAgIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgIHRoaXMudG9vTGF0ZSB8fFxuICAgICAgICAgIFwibXVzdCBiZSBubyBsYXRlciB0aGFuICV7ZGF0ZX1cIjtcbiAgICAgICAgZXJyID0gdi5mb3JtYXQoZXJyLCB7XG4gICAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXQobGF0ZXN0LCBvcHRpb25zKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5mb3JtYXQodmFsdWUsIG9wdGlvbnMpXG4gICAgICAgIH0pO1xuICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdi51bmlxdWUoZXJyb3JzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXJzZTogbnVsbCxcbiAgICAgIGZvcm1hdDogbnVsbFxuICAgIH0pLFxuICAgIGRhdGU6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIG9wdGlvbnMsIHtkYXRlT25seTogdHJ1ZX0pO1xuICAgICAgcmV0dXJuIHYudmFsaWRhdG9ycy5kYXRldGltZS5jYWxsKHYudmFsaWRhdG9ycy5kYXRldGltZSwgdmFsdWUsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZm9ybWF0OiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgaWYgKHYuaXNTdHJpbmcob3B0aW9ucykgfHwgKG9wdGlvbnMgaW5zdGFuY2VvZiBSZWdFeHApKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7cGF0dGVybjogb3B0aW9uc307XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlIHx8IFwiaXMgaW52YWxpZFwiXG4gICAgICAgICwgcGF0dGVybiA9IG9wdGlvbnMucGF0dGVyblxuICAgICAgICAsIG1hdGNoO1xuXG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGFsbG93ZWRcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdi5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzU3RyaW5nKHBhdHRlcm4pKSB7XG4gICAgICAgIHBhdHRlcm4gPSBuZXcgUmVnRXhwKG9wdGlvbnMucGF0dGVybiwgb3B0aW9ucy5mbGFncyk7XG4gICAgICB9XG4gICAgICBtYXRjaCA9IHBhdHRlcm4uZXhlYyh2YWx1ZSk7XG4gICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzBdLmxlbmd0aCAhPSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNsdXNpb246IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGZpbmVcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh2LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt3aXRoaW46IG9wdGlvbnN9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKHYuY29udGFpbnMob3B0aW9ucy53aXRoaW4sIHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgXCJeJXt2YWx1ZX0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBsaXN0XCI7XG4gICAgICByZXR1cm4gdi5mb3JtYXQobWVzc2FnZSwge3ZhbHVlOiB2YWx1ZX0pO1xuICAgIH0sXG4gICAgZXhjbHVzaW9uOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBmaW5lXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodi5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7d2l0aGluOiBvcHRpb25zfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGlmICghdi5jb250YWlucyhvcHRpb25zLndpdGhpbiwgdmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubWVzc2FnZSB8fCBcIl4le3ZhbHVlfSBpcyByZXN0cmljdGVkXCI7XG4gICAgICBpZiAodi5pc1N0cmluZyhvcHRpb25zLndpdGhpblt2YWx1ZV0pKSB7XG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy53aXRoaW5bdmFsdWVdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHYuZm9ybWF0KG1lc3NhZ2UsIHt2YWx1ZTogdmFsdWV9KTtcbiAgICB9LFxuICAgIGVtYWlsOiB2LmV4dGVuZChmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlIHx8IFwiaXMgbm90IGEgdmFsaWQgZW1haWxcIjtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgZmluZVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5QQVRURVJOLmV4ZWModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIFBBVFRFUk46IC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2lcbiAgICB9KSxcbiAgICBlcXVhbGl0eTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMsIGF0dHJpYnV0ZSwgYXR0cmlidXRlcywgZ2xvYmFsT3B0aW9ucykge1xuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5pc1N0cmluZyhvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0ge2F0dHJpYnV0ZTogb3B0aW9uc307XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgXCJpcyBub3QgZXF1YWwgdG8gJXthdHRyaWJ1dGV9XCI7XG5cbiAgICAgIGlmICh2LmlzRW1wdHkob3B0aW9ucy5hdHRyaWJ1dGUpIHx8ICF2LmlzU3RyaW5nKG9wdGlvbnMuYXR0cmlidXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYXR0cmlidXRlIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3RoZXJWYWx1ZSA9IHYuZ2V0RGVlcE9iamVjdFZhbHVlKGF0dHJpYnV0ZXMsIG9wdGlvbnMuYXR0cmlidXRlKVxuICAgICAgICAsIGNvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3IgfHwgZnVuY3Rpb24odjEsIHYyKSB7XG4gICAgICAgICAgcmV0dXJuIHYxID09PSB2MjtcbiAgICAgICAgfVxuICAgICAgICAsIHByZXR0aWZ5ID0gb3B0aW9ucy5wcmV0dGlmeSB8fFxuICAgICAgICAgIChnbG9iYWxPcHRpb25zICYmIGdsb2JhbE9wdGlvbnMucHJldHRpZnkpIHx8XG4gICAgICAgICAgdi5wcmV0dGlmeTtcblxuICAgICAgaWYgKCFjb21wYXJhdG9yKHZhbHVlLCBvdGhlclZhbHVlLCBvcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIHJldHVybiB2LmZvcm1hdChtZXNzYWdlLCB7YXR0cmlidXRlOiBwcmV0dGlmeShvcHRpb25zLmF0dHJpYnV0ZSl9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIEEgVVJMIHZhbGlkYXRvciB0aGF0IGlzIHVzZWQgdG8gdmFsaWRhdGUgVVJMcyB3aXRoIHRoZSBhYmlsaXR5IHRvXG4gICAgLy8gcmVzdHJpY3Qgc2NoZW1lcyBhbmQgc29tZSBkb21haW5zLlxuICAgIHVybDogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJpcyBub3QgYSB2YWxpZCB1cmxcIlxuICAgICAgICAsIHNjaGVtZXMgPSBvcHRpb25zLnNjaGVtZXMgfHwgdGhpcy5zY2hlbWVzIHx8IFsnaHR0cCcsICdodHRwcyddXG4gICAgICAgICwgYWxsb3dMb2NhbCA9IG9wdGlvbnMuYWxsb3dMb2NhbCB8fCB0aGlzLmFsbG93TG9jYWwgfHwgZmFsc2VcbiAgICAgICAgLCBhbGxvd0RhdGFVcmwgPSBvcHRpb25zLmFsbG93RGF0YVVybCB8fCB0aGlzLmFsbG93RGF0YVVybCB8fCBmYWxzZTtcbiAgICAgIGlmICghdi5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2RwZXJpbmkvNzI5Mjk0XG4gICAgICB2YXIgcmVnZXggPVxuICAgICAgICBcIl5cIiArXG4gICAgICAgIC8vIHByb3RvY29sIGlkZW50aWZpZXJcbiAgICAgICAgXCIoPzooPzpcIiArIHNjaGVtZXMuam9pbihcInxcIikgKyBcIik6Ly8pXCIgK1xuICAgICAgICAvLyB1c2VyOnBhc3MgYXV0aGVudGljYXRpb25cbiAgICAgICAgXCIoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT9cIiArXG4gICAgICAgIFwiKD86XCI7XG5cbiAgICAgIHZhciB0bGQgPSBcIig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmZdezIsfSkpXCI7XG5cbiAgICAgIGlmIChhbGxvd0xvY2FsKSB7XG4gICAgICAgIHRsZCArPSBcIj9cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2V4ICs9XG4gICAgICAgICAgLy8gSVAgYWRkcmVzcyBleGNsdXNpb25cbiAgICAgICAgICAvLyBwcml2YXRlICYgbG9jYWwgbmV0d29ya3NcbiAgICAgICAgICBcIig/ISg/OjEwfDEyNykoPzpcXFxcLlxcXFxkezEsM30pezN9KVwiICtcbiAgICAgICAgICBcIig/ISg/OjE2OVxcXFwuMjU0fDE5MlxcXFwuMTY4KSg/OlxcXFwuXFxcXGR7MSwzfSl7Mn0pXCIgK1xuICAgICAgICAgIFwiKD8hMTcyXFxcXC4oPzoxWzYtOV18MlxcXFxkfDNbMC0xXSkoPzpcXFxcLlxcXFxkezEsM30pezJ9KVwiO1xuICAgICAgfVxuXG4gICAgICByZWdleCArPVxuICAgICAgICAgIC8vIElQIGFkZHJlc3MgZG90dGVkIG5vdGF0aW9uIG9jdGV0c1xuICAgICAgICAgIC8vIGV4Y2x1ZGVzIGxvb3BiYWNrIG5ldHdvcmsgMC4wLjAuMFxuICAgICAgICAgIC8vIGV4Y2x1ZGVzIHJlc2VydmVkIHNwYWNlID49IDIyNC4wLjAuMFxuICAgICAgICAgIC8vIGV4Y2x1ZGVzIG5ldHdvcmsgJiBicm9hY2FzdCBhZGRyZXNzZXNcbiAgICAgICAgICAvLyAoZmlyc3QgJiBsYXN0IElQIGFkZHJlc3Mgb2YgZWFjaCBjbGFzcylcbiAgICAgICAgICBcIig/OlsxLTldXFxcXGQ/fDFcXFxcZFxcXFxkfDJbMDFdXFxcXGR8MjJbMC0zXSlcIiArXG4gICAgICAgICAgXCIoPzpcXFxcLig/OjE/XFxcXGR7MSwyfXwyWzAtNF1cXFxcZHwyNVswLTVdKSl7Mn1cIiArXG4gICAgICAgICAgXCIoPzpcXFxcLig/OlsxLTldXFxcXGQ/fDFcXFxcZFxcXFxkfDJbMC00XVxcXFxkfDI1WzAtNF0pKVwiICtcbiAgICAgICAgXCJ8XCIgK1xuICAgICAgICAgIC8vIGhvc3QgbmFtZVxuICAgICAgICAgIFwiKD86KD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspXCIgK1xuICAgICAgICAgIC8vIGRvbWFpbiBuYW1lXG4gICAgICAgICAgXCIoPzpcXFxcLig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XS0qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSpcIiArXG4gICAgICAgICAgdGxkICtcbiAgICAgICAgXCIpXCIgK1xuICAgICAgICAvLyBwb3J0IG51bWJlclxuICAgICAgICBcIig/OjpcXFxcZHsyLDV9KT9cIiArXG4gICAgICAgIC8vIHJlc291cmNlIHBhdGhcbiAgICAgICAgXCIoPzpbLz8jXVxcXFxTKik/XCIgK1xuICAgICAgXCIkXCI7XG5cbiAgICAgIGlmIChhbGxvd0RhdGFVcmwpIHtcbiAgICAgICAgLy8gUkZDIDIzOTdcbiAgICAgICAgdmFyIG1lZGlhVHlwZSA9IFwiXFxcXHcrXFxcXC9bLSsuXFxcXHddKyg/OjtbXFxcXHc9XSspKlwiO1xuICAgICAgICB2YXIgdXJsY2hhciA9IFwiW0EtWmEtejAtOS1fLiF+XFxcXConKCk7XFxcXC8/OkAmPSskLCVdKlwiO1xuICAgICAgICB2YXIgZGF0YXVybCA9IFwiZGF0YTooPzpcIittZWRpYVR5cGUrXCIpPyg/OjtiYXNlNjQpPyxcIit1cmxjaGFyO1xuICAgICAgICByZWdleCA9IFwiKD86XCIrcmVnZXgrXCIpfCg/Ol5cIitkYXRhdXJsK1wiJClcIjtcbiAgICAgIH1cblxuICAgICAgdmFyIFBBVFRFUk4gPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgICAgaWYgKCFQQVRURVJOLmV4ZWModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgIH0sXG4gICAgdHlwZTogdi5leHRlbmQoZnVuY3Rpb24odmFsdWUsIG9yaWdpbmFsT3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgICBpZiAodi5pc1N0cmluZyhvcmlnaW5hbE9wdGlvbnMpKSB7XG4gICAgICAgIG9yaWdpbmFsT3B0aW9ucyA9IHt0eXBlOiBvcmlnaW5hbE9wdGlvbnN9O1xuICAgICAgfVxuXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3JpZ2luYWxPcHRpb25zKTtcblxuICAgICAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHR5cGUgd2FzIHNwZWNpZmllZFwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoZWNrO1xuICAgICAgaWYgKHYuaXNGdW5jdGlvbih0eXBlKSkge1xuICAgICAgICBjaGVjayA9IHR5cGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVjayA9IHRoaXMudHlwZXNbdHlwZV07XG4gICAgICB9XG5cbiAgICAgIGlmICghdi5pc0Z1bmN0aW9uKGNoZWNrKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YWxpZGF0ZS52YWxpZGF0b3JzLnR5cGUudHlwZXMuXCIgKyB0eXBlICsgXCIgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjaGVjayh2YWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzLCBnbG9iYWxPcHRpb25zKSkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IG9yaWdpbmFsT3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgdGhpcy5tZXNzYWdlc1t0eXBlXSB8fFxuICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgICh2LmlzRnVuY3Rpb24odHlwZSkgPyBcIm11c3QgYmUgb2YgdGhlIGNvcnJlY3QgdHlwZVwiIDogXCJtdXN0IGJlIG9mIHR5cGUgJXt0eXBlfVwiKTtcblxuICAgICAgICBpZiAodi5pc0Z1bmN0aW9uKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UodmFsdWUsIG9yaWdpbmFsT3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzLCBnbG9iYWxPcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2LmZvcm1hdChtZXNzYWdlLCB7YXR0cmlidXRlOiB2LnByZXR0aWZ5KGF0dHJpYnV0ZSksIHR5cGU6IHR5cGV9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICB0eXBlczoge1xuICAgICAgICBvYmplY3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHYuaXNPYmplY3QodmFsdWUpICYmICF2LmlzQXJyYXkodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBhcnJheTogdi5pc0FycmF5LFxuICAgICAgICBpbnRlZ2VyOiB2LmlzSW50ZWdlcixcbiAgICAgICAgbnVtYmVyOiB2LmlzTnVtYmVyLFxuICAgICAgICBzdHJpbmc6IHYuaXNTdHJpbmcsXG4gICAgICAgIGRhdGU6IHYuaXNEYXRlLFxuICAgICAgICBib29sZWFuOiB2LmlzQm9vbGVhblxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiB7fVxuICAgIH0pXG4gIH07XG5cbiAgdmFsaWRhdGUuZm9ybWF0dGVycyA9IHtcbiAgICBkZXRhaWxlZDogZnVuY3Rpb24oZXJyb3JzKSB7cmV0dXJuIGVycm9yczt9LFxuICAgIGZsYXQ6IHYuZmxhdHRlbkVycm9yc1RvQXJyYXksXG4gICAgZ3JvdXBlZDogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICB2YXIgYXR0cjtcblxuICAgICAgZXJyb3JzID0gdi5ncm91cEVycm9yc0J5QXR0cmlidXRlKGVycm9ycyk7XG4gICAgICBmb3IgKGF0dHIgaW4gZXJyb3JzKSB7XG4gICAgICAgIGVycm9yc1thdHRyXSA9IHYuZmxhdHRlbkVycm9yc1RvQXJyYXkoZXJyb3JzW2F0dHJdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfSxcbiAgICBjb25zdHJhaW50OiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciBhdHRyO1xuICAgICAgZXJyb3JzID0gdi5ncm91cEVycm9yc0J5QXR0cmlidXRlKGVycm9ycyk7XG4gICAgICBmb3IgKGF0dHIgaW4gZXJyb3JzKSB7XG4gICAgICAgIGVycm9yc1thdHRyXSA9IGVycm9yc1thdHRyXS5tYXAoZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWxpZGF0b3I7XG4gICAgICAgIH0pLnNvcnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuICB9O1xuXG4gIHZhbGlkYXRlLmV4cG9zZU1vZHVsZSh2YWxpZGF0ZSwgdGhpcywgZXhwb3J0cywgbW9kdWxlLCBkZWZpbmUpO1xufSkuY2FsbCh0aGlzLFxuICAgICAgICB0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgPyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBleHBvcnRzIDogbnVsbCxcbiAgICAgICAgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBtb2R1bGUgOiBudWxsLFxuICAgICAgICB0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyA/IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGRlZmluZSA6IG51bGwpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5hbWREID0gZnVuY3Rpb24gKCkge1xuXHR0aHJvdyBuZXcgRXJyb3IoJ2RlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdCcpO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tIFwidmFsaWRhdGUuanNcIjtcbmV4cG9ydCBjbGFzcyBFdmVudE1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICB0aGlzLmV2ZW50ID0gcHJvcHMuZXZlbnQ7XG4gICAgICAgIHRoaXMudGFncyA9IHByb3BzLnRhZ3MgfHwgW107XG4gICAgICAgIHRoaXMudXJsID0gcHJvcHMudXJsO1xuICAgICAgICB0aGlzLnRpdGxlID0gcHJvcHMudGl0bGU7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcHMudHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMudHMgPSBuZXcgRGF0ZShwcm9wcy50cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXByb3BzLnRzKSB7XG4gICAgICAgICAgICB0aGlzLnRzID0gbmV3IERhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbmB0IGNyZWF0ZSBldmVudC5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUluc3RhbmNlKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgRXZlbnRNb2RlbChldmVudCk7XG4gICAgfVxuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICBsZXQgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBldmVudDoge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93TG9jYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAgIHByZXNlbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGFnczogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuZXZlcnkoKHRhZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YWcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWcgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogXCJUYWdzIG5vdCB2YWxpZC5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRzOiAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmIHZhbHVlLnRvRGF0ZVN0cmluZygpICE9PSBcIkludmFsaWQgRGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEYXRlIG5vdCB2YWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB2YWxpZGF0ZSh7XG4gICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgICAgICAgIHRhZ3M6IHRoaXMudGFncyxcbiAgICAgICAgICAgIHRzOiB0aGlzLnRzLFxuICAgICAgICB9LCBjb25zdHJhaW50cyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gXCIuL0FwaVNlcnZpY2VcIjtcbmltcG9ydCB7IEV2ZW50c1NlcnZpY2UgfSBmcm9tIFwiLi9FdmVudHNTZXJ2aWNlXCI7XG5jb25zdCBldmVudFNlcnZpY2UgPSBuZXcgRXZlbnRzU2VydmljZShBcGlTZXJ2aWNlKTtcbmNvbnN0IHRyYWNrZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2soLi4udGFncykge1xuICAgICAgICAgICAgZXZlbnRTZXJ2aWNlLm5ld0V2ZW50KC4uLnRhZ3MpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xud2luZG93LnRyYWNrZXIgPSB0cmFja2VyKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoZXZlbnQpID0+IHtcbiAgICBldmVudFNlcnZpY2UuZm9yY2VTZW5kQnVmZmVyKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn0pO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gXCJ0aHJvdHRsZS1kZWJvdW5jZVwiO1xuaW1wb3J0IHsgRXZlbnRNb2RlbCB9IGZyb20gXCIuLi9tb2RlbHMvRXZlbnRcIjtcbmNsYXNzIEV2ZW50c1NlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKFNlbmRlclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5uZXdFdmVudCA9IChldmVudCwgLi4udGFncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3RXZlbnQgPSBuZXcgRXZlbnRNb2RlbCh7XG4gICAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAgICAgdGFnczogWy4uLnRhZ3NdLFxuICAgICAgICAgICAgICAgIHVybDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwidGl0bGVcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChuZXdFdmVudCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrU2VuZCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmRCdWZmZXJUaHJvdHRsZSA9IHRocm90dGxlKDEwMDAsIHRoaXMuc2VuZEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlclNlcnZpY2UoKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5ldmVudFRvU2VuZCA9IFtdO1xuICAgIH1cbiAgICBjaGVja1NlbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gMykge1xuICAgICAgICAgICAgdGhpcy5mb3JjZVNlbmRCdWZmZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlclRocm90dGxlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yY2VTZW5kQnVmZmVyKCkge1xuICAgICAgICB0aGlzLnNlbmRCdWZmZXJUaHJvdHRsZS5jYW5jZWwoeyB1cGNvbWluZ09ubHk6IHRydWUgfSk7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlcigpO1xuICAgIH1cbiAgICBzZW5kQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlci5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5ldmVudFRvU2VuZCA9IFsuLi50aGlzLmJ1ZmZlcl07XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRlci5zZW5kKHRoaXMuZXZlbnRUb1NlbmQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRUb1NlbmQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJldHVyblRvQm9vZmVyRXZlbnRUb1NlbmQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuVG9Cb29mZXJFdmVudFRvU2VuZCgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIudW5zaGlmdCguLi50aGlzLmV2ZW50VG9TZW5kKTtcbiAgICAgICAgdGhpcy5ldmVudFRvU2VuZCA9IFtdO1xuICAgIH1cbn1cbmV4cG9ydCB7IEV2ZW50c1NlcnZpY2UgfTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCxuby1wYXJhbS1yZWFzc2lnbixuby1zaGFkb3cgKi9cblxuLyoqXG4gKiBUaHJvdHRsZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRXNwZWNpYWxseSB1c2VmdWwgZm9yIHJhdGUgbGltaXRpbmdcbiAqIGV4ZWN1dGlvbiBvZiBoYW5kbGVycyBvbiBldmVudHMgbGlrZSByZXNpemUgYW5kIHNjcm9sbC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgLSAgICAgICAgICAgICAgICAgIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50IGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcilcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmUgbW9zdCB1c2VmdWwuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtICAgICAgICAgICAgICAgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXMtaXMsIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtICAgICAgICAgICAgICBBbiBvYmplY3QgdG8gY29uZmlndXJlIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm5vVHJhaWxpbmddIC0gICBPcHRpb25hbCwgZGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vVHJhaWxpbmcgaXMgdHJ1ZSwgY2FsbGJhY2sgd2lsbCBvbmx5IGV4ZWN1dGUgZXZlcnkgYGRlbGF5YCBtaWxsaXNlY29uZHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZC4gSWYgbm9UcmFpbGluZyBpcyBmYWxzZSBvciB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZSBmaW5hbCB0aW1lIGFmdGVyIHRoZSBsYXN0IHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBkZWxheWAgbWlsbGlzZWNvbmRzLCB0aGUgaW50ZXJuYWwgY291bnRlciBpcyByZXNldCkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm5vTGVhZGluZ10gLSAgIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgbm9MZWFkaW5nIGlzIGZhbHNlLCB0aGUgZmlyc3QgdGhyb3R0bGVkLWZ1bmN0aW9uIGNhbGwgd2lsbCBleGVjdXRlIGNhbGxiYWNrXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1tZWRpYXRlbHkuIElmIG5vTGVhZGluZyBpcyB0cnVlLCB0aGUgZmlyc3QgdGhlIGNhbGxiYWNrIGV4ZWN1dGlvbiB3aWxsIGJlIHNraXBwZWQuIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgd2lsbCBuZXZlciBleGVjdXRlZCBpZiBib3RoIG5vTGVhZGluZyA9IHRydWUgYW5kIG5vVHJhaWxpbmcgPSB0cnVlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kZWJvdW5jZU1vZGVdIC0gSWYgYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy4gSWYgYGRlYm91bmNlTW9kZWAgaXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAoYXQgZW5kKSwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldywgdGhyb3R0bGVkLCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUgKGRlbGF5LCBjYWxsYmFjaywgb3B0aW9ucykge1xuICB2YXIgX3JlZiA9IG9wdGlvbnMgfHwge30sXG4gICAgICBfcmVmJG5vVHJhaWxpbmcgPSBfcmVmLm5vVHJhaWxpbmcsXG4gICAgICBub1RyYWlsaW5nID0gX3JlZiRub1RyYWlsaW5nID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkbm9UcmFpbGluZyxcbiAgICAgIF9yZWYkbm9MZWFkaW5nID0gX3JlZi5ub0xlYWRpbmcsXG4gICAgICBub0xlYWRpbmcgPSBfcmVmJG5vTGVhZGluZyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJG5vTGVhZGluZyxcbiAgICAgIF9yZWYkZGVib3VuY2VNb2RlID0gX3JlZi5kZWJvdW5jZU1vZGUsXG4gICAgICBkZWJvdW5jZU1vZGUgPSBfcmVmJGRlYm91bmNlTW9kZSA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRkZWJvdW5jZU1vZGU7XG4gIC8qXG4gICAqIEFmdGVyIHdyYXBwZXIgaGFzIHN0b3BwZWQgYmVpbmcgY2FsbGVkLCB0aGlzIHRpbWVvdXQgZW5zdXJlcyB0aGF0XG4gICAqIGBjYWxsYmFja2AgaXMgZXhlY3V0ZWQgYXQgdGhlIHByb3BlciB0aW1lcyBpbiBgdGhyb3R0bGVgIGFuZCBgZW5kYFxuICAgKiBkZWJvdW5jZSBtb2Rlcy5cbiAgICovXG5cblxuICB2YXIgdGltZW91dElEO1xuICB2YXIgY2FuY2VsbGVkID0gZmFsc2U7IC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cblxuICB2YXIgbGFzdEV4ZWMgPSAwOyAvLyBGdW5jdGlvbiB0byBjbGVhciBleGlzdGluZyB0aW1lb3V0XG5cbiAgZnVuY3Rpb24gY2xlYXJFeGlzdGluZ1RpbWVvdXQoKSB7XG4gICAgaWYgKHRpbWVvdXRJRCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJRCk7XG4gICAgfVxuICB9IC8vIEZ1bmN0aW9uIHRvIGNhbmNlbCBuZXh0IGV4ZWNcblxuXG4gIGZ1bmN0aW9uIGNhbmNlbChvcHRpb25zKSB7XG4gICAgdmFyIF9yZWYyID0gb3B0aW9ucyB8fCB7fSxcbiAgICAgICAgX3JlZjIkdXBjb21pbmdPbmx5ID0gX3JlZjIudXBjb21pbmdPbmx5LFxuICAgICAgICB1cGNvbWluZ09ubHkgPSBfcmVmMiR1cGNvbWluZ09ubHkgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIkdXBjb21pbmdPbmx5O1xuXG4gICAgY2xlYXJFeGlzdGluZ1RpbWVvdXQoKTtcbiAgICBjYW5jZWxsZWQgPSAhdXBjb21pbmdPbmx5O1xuICB9XG4gIC8qXG4gICAqIFRoZSBgd3JhcHBlcmAgZnVuY3Rpb24gZW5jYXBzdWxhdGVzIGFsbCBvZiB0aGUgdGhyb3R0bGluZyAvIGRlYm91bmNpbmdcbiAgICogZnVuY3Rpb25hbGl0eSBhbmQgd2hlbiBleGVjdXRlZCB3aWxsIGxpbWl0IHRoZSByYXRlIGF0IHdoaWNoIGBjYWxsYmFja2BcbiAgICogaXMgZXhlY3V0ZWQuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJndW1lbnRzXyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3VtZW50c19bX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIGxhc3RFeGVjO1xuXG4gICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRXhlY3V0ZSBgY2FsbGJhY2tgIGFuZCB1cGRhdGUgdGhlIGBsYXN0RXhlY2AgdGltZXN0YW1wLlxuXG5cbiAgICBmdW5jdGlvbiBleGVjKCkge1xuICAgICAgbGFzdEV4ZWMgPSBEYXRlLm5vdygpO1xuICAgICAgY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJndW1lbnRzXyk7XG4gICAgfVxuICAgIC8qXG4gICAgICogSWYgYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pIHRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgZmxhZ1xuICAgICAqIHRvIGFsbG93IGZ1dHVyZSBgY2FsbGJhY2tgIGV4ZWN1dGlvbnMuXG4gICAgICovXG5cblxuICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdGltZW91dElEID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICghbm9MZWFkaW5nICYmIGRlYm91bmNlTW9kZSAmJiAhdGltZW91dElEKSB7XG4gICAgICAvKlxuICAgICAgICogU2luY2UgYHdyYXBwZXJgIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUgYW5kXG4gICAgICAgKiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYFxuICAgICAgICogYW5kIG5vTGVhZGluZyAhPSB0cnVlLlxuICAgICAgICovXG4gICAgICBleGVjKCk7XG4gICAgfVxuXG4gICAgY2xlYXJFeGlzdGluZ1RpbWVvdXQoKTtcblxuICAgIGlmIChkZWJvdW5jZU1vZGUgPT09IHVuZGVmaW5lZCAmJiBlbGFwc2VkID4gZGVsYXkpIHtcbiAgICAgIGlmIChub0xlYWRpbmcpIHtcbiAgICAgICAgLypcbiAgICAgICAgICogSW4gdGhyb3R0bGUgbW9kZSB3aXRoIG5vTGVhZGluZywgaWYgYGRlbGF5YCB0aW1lIGhhc1xuICAgICAgICAgKiBiZWVuIGV4Y2VlZGVkLCB1cGRhdGUgYGxhc3RFeGVjYCBhbmQgc2NoZWR1bGUgYGNhbGxiYWNrYFxuICAgICAgICAgKiB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG4gICAgICAgICAqL1xuICAgICAgICBsYXN0RXhlYyA9IERhdGUubm93KCk7XG5cbiAgICAgICAgaWYgKCFub1RyYWlsaW5nKSB7XG4gICAgICAgICAgdGltZW91dElEID0gc2V0VGltZW91dChkZWJvdW5jZU1vZGUgPyBjbGVhciA6IGV4ZWMsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLypcbiAgICAgICAgICogSW4gdGhyb3R0bGUgbW9kZSB3aXRob3V0IG5vTGVhZGluZywgaWYgYGRlbGF5YCB0aW1lIGhhcyBiZWVuIGV4Y2VlZGVkLCBleGVjdXRlXG4gICAgICAgICAqIGBjYWxsYmFja2AuXG4gICAgICAgICAqL1xuICAgICAgICBleGVjKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub1RyYWlsaW5nICE9PSB0cnVlKSB7XG4gICAgICAvKlxuICAgICAgICogSW4gdHJhaWxpbmcgdGhyb3R0bGUgbW9kZSwgc2luY2UgYGRlbGF5YCB0aW1lIGhhcyBub3QgYmVlblxuICAgICAgICogZXhjZWVkZWQsIHNjaGVkdWxlIGBjYWxsYmFja2AgdG8gZXhlY3V0ZSBgZGVsYXlgIG1zIGFmdGVyIG1vc3RcbiAgICAgICAqIHJlY2VudCBleGVjdXRpb24uXG4gICAgICAgKlxuICAgICAgICogSWYgYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGVcbiAgICAgICAqIGFmdGVyIGBkZWxheWAgbXMuXG4gICAgICAgKlxuICAgICAgICogSWYgYGRlYm91bmNlTW9kZWAgaXMgZmFsc2UgKGF0IGVuZCksIHNjaGVkdWxlIGBjYWxsYmFja2AgdG9cbiAgICAgICAqIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cbiAgICAgICAqL1xuICAgICAgdGltZW91dElEID0gc2V0VGltZW91dChkZWJvdW5jZU1vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIHdyYXBwZXIuY2FuY2VsID0gY2FuY2VsOyAvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXG5cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCAqL1xuLyoqXG4gKiBEZWJvdW5jZSBleGVjdXRpb24gb2YgYSBmdW5jdGlvbi4gRGVib3VuY2luZywgdW5saWtlIHRocm90dGxpbmcsXG4gKiBndWFyYW50ZWVzIHRoYXQgYSBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIGEgc2luZ2xlIHRpbWUsIGVpdGhlciBhdCB0aGVcbiAqIHZlcnkgYmVnaW5uaW5nIG9mIGEgc2VyaWVzIG9mIGNhbGxzLCBvciBhdCB0aGUgdmVyeSBlbmQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IC0gICAgICAgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gICAgICAgICAgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSBkZWJvdW5jZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gICAgICAgICAgIEFuIG9iamVjdCB0byBjb25maWd1cmUgb3B0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYXRCZWdpbl0gLSAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdEJlZ2luIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdEJlZ2luIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBhdCB0aGUgZmlyc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBuZXcsIGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBkZWJvdW5jZSAoZGVsYXksIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmID0gb3B0aW9ucyB8fCB7fSxcbiAgICAgIF9yZWYkYXRCZWdpbiA9IF9yZWYuYXRCZWdpbixcbiAgICAgIGF0QmVnaW4gPSBfcmVmJGF0QmVnaW4gPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRhdEJlZ2luO1xuXG4gIHJldHVybiB0aHJvdHRsZShkZWxheSwgY2FsbGJhY2ssIHtcbiAgICBkZWJvdW5jZU1vZGU6IGF0QmVnaW4gIT09IGZhbHNlXG4gIH0pO1xufVxuXG5leHBvcnQgeyBkZWJvdW5jZSwgdGhyb3R0bGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5jbGFzcyBBcGlTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZW5kID0gKGV2ZW50cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB3aW5kb3cuZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwMDEvdHJhY2tcIiwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOFwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZXZlbnRzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHlpZWxkIHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIGlmIChib2R5ID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGJvZHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgeyBBcGlTZXJ2aWNlIH07XG4iXSwibmFtZXMiOlsiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsInZhbGlkYXRlIiwiYXR0cmlidXRlcyIsImNvbnN0cmFpbnRzIiwib3B0aW9ucyIsInYiLCJleHRlbmQiLCJyZXN1bHRzIiwicnVuVmFsaWRhdGlvbnMiLCJzb21lIiwiciIsImlzUHJvbWlzZSIsImVycm9yIiwiRXJyb3IiLCJwcm9jZXNzVmFsaWRhdGlvblJlc3VsdHMiLCJvYmoiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJmb3JFYWNoIiwic291cmNlIiwiYXR0ciIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwicGF0Y2giLCJtZXRhZGF0YSIsInRvU3RyaW5nIiwiZm9ybWF0IiwiaXNFbXB0eSIsIlByb21pc2UiLCJFTVBUWV9TVFJJTkdfUkVHRVhQIiwidmFsaWRhdG9yTmFtZSIsInZhbHVlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRvciIsInZhbGlkYXRvck9wdGlvbnMiLCJpc0RvbUVsZW1lbnQiLCJpc0pxdWVyeUVsZW1lbnQiLCJjb2xsZWN0Rm9ybVZhbHVlcyIsImdldERlZXBPYmplY3RWYWx1ZSIsInJlc3VsdCIsIm5hbWUiLCJwdXNoIiwiYXR0cmlidXRlIiwiZ2xvYmFsT3B0aW9ucyIsImVycm9ycyIsInBydW5lRW1wdHlFcnJvcnMiLCJleHBhbmRNdWx0aXBsZUVycm9ycyIsImNvbnZlcnRFcnJvck1lc3NhZ2VzIiwiZm9ybWF0dGVycyIsInVuZGVmaW5lZCIsImFzeW5jIiwiV3JhcEVycm9ycyIsIndyYXBFcnJvcnMiLCJjbGVhbkF0dHJpYnV0ZXMiLCJyZXNvbHZlIiwicmVqZWN0Iiwid2FpdEZvclJlc3VsdHMiLCJ0aGVuIiwiZXJyIiwic2luZ2xlIiwiZnVsbE1lc3NhZ2VzIiwicmVkdWNlIiwibWVtbyIsImFyZ3MiLCJhcHBseSIsImlzTnVtYmVyIiwiaXNOYU4iLCJpc0Z1bmN0aW9uIiwiaXNJbnRlZ2VyIiwiaXNCb29sZWFuIiwiaXNPYmplY3QiLCJPYmplY3QiLCJpc0RhdGUiLCJEYXRlIiwiaXNEZWZpbmVkIiwicCIsIm8iLCJpc1N0cmluZyIsImpxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJIVE1MRWxlbWVudCIsIm5vZGVUeXBlIiwibm9kZU5hbWUiLCJ0ZXN0IiwiaXNBcnJheSIsImxlbmd0aCIsInN0ciIsInZhbHMiLCJyZXBsYWNlIiwiRk9STUFUX1JFR0VYUCIsIm0wIiwibTEiLCJtMiIsIlN0cmluZyIsInByZXR0aWZ5IiwicGFyc2VGbG9hdCIsIk1hdGgiLCJyb3VuZCIsInRvRml4ZWQiLCJtYXAiLCJzIiwiam9pbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0xvd2VyQ2FzZSIsInN0cmluZ2lmeVZhbHVlIiwiaXNIYXNoIiwiY29udGFpbnMiLCJpbmRleE9mIiwidW5pcXVlIiwiYXJyYXkiLCJmaWx0ZXIiLCJlbCIsImluZGV4IiwiZm9yRWFjaEtleUluS2V5cGF0aCIsIm9iamVjdCIsImtleXBhdGgiLCJjYWxsYmFjayIsImkiLCJrZXkiLCJlc2NhcGUiLCJmb3JtIiwiaiIsImlucHV0IiwiaW5wdXRzIiwib3B0aW9uIiwidmFsdWVzIiwiaXRlbSIsImdldEF0dHJpYnV0ZSIsInNhbml0aXplRm9ybVZhbHVlIiwidHlwZSIsImNoZWNrZWQiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwiX3ZhbCIsInNlbGVjdGVkSW5kZXgiLCJ0cmltIiwibnVsbGlmeSIsImNhcGl0YWxpemUiLCJ0b1VwcGVyQ2FzZSIsInJldCIsIm1zZyIsImVycm9ySW5mbyIsImdyb3VwRXJyb3JzQnlBdHRyaWJ1dGUiLCJsaXN0IiwiZmxhdHRlbkVycm9yc1RvQXJyYXkiLCJzZWxmIiwid2hpdGVsaXN0Iiwid2hpdGVsaXN0Q3JlYXRvciIsImxhc3QiLCJjbGVhblJlY3Vyc2l2ZSIsInciLCJvdyIsImJ1aWxkT2JqZWN0V2hpdGVsaXN0IiwiZXhwb3NlTW9kdWxlIiwicm9vdCIsImFtZCIsIndhcm4iLCJjb25zb2xlIiwicHJlc2VuY2UiLCJ0aGlzIiwiYWxsb3dFbXB0eSIsIm1lc3NhZ2UiLCJpcyIsIm1heGltdW0iLCJtaW5pbXVtIiwidG9rZW5pemVyIiwidmFsIiwid3JvbmdMZW5ndGgiLCJjb3VudCIsInRvb1Nob3J0IiwidG9vTG9uZyIsIm5vdFZhbGlkIiwibnVtZXJpY2FsaXR5IiwiY2hlY2tzIiwiZ3JlYXRlclRoYW4iLCJjIiwiZ3JlYXRlclRoYW5PckVxdWFsVG8iLCJlcXVhbFRvIiwibGVzc1RoYW4iLCJsZXNzVGhhbk9yRXF1YWxUbyIsImRpdmlzaWJsZUJ5Iiwic3RyaWN0IiwicGF0dGVybiIsIm9ubHlJbnRlZ2VyIiwiUmVnRXhwIiwibm9TdHJpbmdzIiwibm90SW50ZWdlciIsIm9kZCIsIm5vdE9kZCIsImV2ZW4iLCJub3RFdmVuIiwiZGF0ZXRpbWUiLCJwYXJzZSIsImVhcmxpZXN0IiwiTmFOIiwibGF0ZXN0IiwiZGF0ZU9ubHkiLCJ0b29FYXJseSIsImRhdGUiLCJ0b29MYXRlIiwibWF0Y2giLCJmbGFncyIsImV4ZWMiLCJpbmNsdXNpb24iLCJ3aXRoaW4iLCJleGNsdXNpb24iLCJlbWFpbCIsIlBBVFRFUk4iLCJlcXVhbGl0eSIsIm90aGVyVmFsdWUiLCJjb21wYXJhdG9yIiwidjEiLCJ2MiIsInVybCIsInNjaGVtZXMiLCJhbGxvd0xvY2FsIiwiYWxsb3dEYXRhVXJsIiwicmVnZXgiLCJ0bGQiLCJvcmlnaW5hbE9wdGlvbnMiLCJjaGVjayIsInR5cGVzIiwibWVzc2FnZXMiLCJpbnRlZ2VyIiwibnVtYmVyIiwic3RyaW5nIiwiYm9vbGVhbiIsImRldGFpbGVkIiwiZmxhdCIsImdyb3VwZWQiLCJjb25zdHJhaW50Iiwic29ydCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImlkIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImFtZEQiLCJubWQiLCJwYXRocyIsImNoaWxkcmVuIiwiRXZlbnRNb2RlbCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJldmVudCIsInRhZ3MiLCJ0aXRsZSIsInRzIiwiZSIsInN0YXRpYyIsImV2ZXJ5IiwidGFnIiwidG9EYXRlU3RyaW5nIiwiZXZlbnRTZXJ2aWNlIiwiU2VuZGVyU2VydmljZSIsIm5ld0V2ZW50IiwiYnVmZmVyIiwiY2hlY2tTZW5kIiwic2VuZEJ1ZmZlclRocm90dGxlIiwiZGVsYXkiLCJ0aW1lb3V0SUQiLCJfcmVmIiwiX3JlZiRub1RyYWlsaW5nIiwibm9UcmFpbGluZyIsIl9yZWYkbm9MZWFkaW5nIiwibm9MZWFkaW5nIiwiX3JlZiRkZWJvdW5jZU1vZGUiLCJkZWJvdW5jZU1vZGUiLCJjYW5jZWxsZWQiLCJsYXN0RXhlYyIsImNsZWFyRXhpc3RpbmdUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwid3JhcHBlciIsIl9sZW4iLCJhcmd1bWVudHNfIiwiQXJyYXkiLCJfa2V5IiwiZWxhcHNlZCIsIm5vdyIsImNsZWFyIiwic2V0VGltZW91dCIsImNhbmNlbCIsIl9yZWYyJHVwY29taW5nT25seSIsInVwY29taW5nT25seSIsInRocm90dGxlIiwic2VuZEJ1ZmZlciIsInNlbmRlciIsImV2ZW50VG9TZW5kIiwiZm9yY2VTZW5kQnVmZmVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJzZW5kIiwicmV0dXJuVG9Cb29mZXJFdmVudFRvU2VuZCIsIlAiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwiZG9uZSIsInVuc2hpZnQiLCJldmVudHMiLCJfX2F3YWl0ZXIiLCJyZXNwb25zZSIsIndpbmRvdyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJ0ZXh0IiwidHJhY2tlciIsInRyYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==